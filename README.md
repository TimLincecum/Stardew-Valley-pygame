# æ¯•è®¾
æ¯•è®¾ï¼ˆç¬¬ä¸€æ¬¡ç”¨è¿™ä¸ªæ”¾ï¼Œç©ç©ï¼‰
mdå’‹å†™æ¥ç€ï¼Ÿå¿˜äº†ï¼Œå…ˆéšä¾¿å†™ç‚¹ï¼Œæ¯•ä¸šè®¾è®¡pygameçš„æ¸¸æˆè®¾è®¡ï¼Œå­˜ç€ç©ç©

# äº®ç‚¹åˆ†æ

1. æ¸¸æˆé£æ ¼ï¼šè¿™ä¸ªæ¸¸æˆé‡‡ç”¨äº†åƒç´ åŒ–çš„é£æ ¼ï¼Œå¹¶å¸¦æœ‰å¾ˆå¤šéœ“è™¹ç¯æ•ˆæœå’ŒåŠ¨ç”»ã€‚è¿™ç§è®¾è®¡é£æ ¼éå¸¸æµè¡Œï¼Œå¯ä»¥ä½¿æ¸¸æˆçœ‹èµ·æ¥éå¸¸é…·ã€‚

2. å¯¹è±¡ç»„ç»‡ï¼šåœ¨æ¸¸æˆä¸­ï¼Œæœ‰å¾ˆå¤šä¸åŒç±»å‹çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ç©å®¶ã€æ ‘ã€è‹¹æœï¼‰ï¼Œå¹¶ä¸”å®ƒä»¬éƒ½éœ€è¦ä»¥æŸç§æ–¹å¼ç»„ç»‡èµ·æ¥ã€‚ä½œè€…ä½¿ç”¨äº† Pygame çš„ç²¾çµç»„ç»‡åŠŸèƒ½ï¼Œè¿™æ ·å¯ä»¥å¾ˆå®¹æ˜“åœ°å°†æ‰€æœ‰ç›¸å…³å¯¹è±¡åˆ†ä¸ºä¸€ç»„ï¼Œå¹¶åœ¨æ›´æ–°æ—¶ä¸€èµ·å¤„ç†ã€‚

3. ç¢°æ’æ£€æµ‹ï¼šå½“æ¸¸æˆä¸­çš„ä¸¤ä¸ªå¯¹è±¡ç›¸äº’ä½œç”¨æ—¶ï¼Œé€šå¸¸éœ€è¦æ£€æµ‹å®ƒä»¬æ˜¯å¦å‘ç”Ÿäº†ç¢°æ’ã€‚Pygame æä¾›äº†æ–¹ä¾¿çš„ç¢°æ’æ£€æµ‹ APIï¼Œä½¿å¾—ç¼–å†™ç¢°æ’ä»£ç å˜å¾—å¾ˆå®¹æ˜“ã€‚

4. åŠ¨ç”»ï¼šåœ¨æ¸¸æˆä¸­ï¼Œæœ‰å¾ˆå¤šå¯¹è±¡éƒ½éœ€è¦åŠ¨ç”»æ•ˆæœï¼Œæ¯”å¦‚æ°´çš„æ³¢åŠ¨ã€æ ‘çš„æ‘‡æ™ƒç­‰ç­‰ã€‚ä½œè€…ä½¿ç”¨äº† Pygame çš„ Surface ç±»æ¥åˆ›å»ºå¸§ï¼Œå¹¶ä½¿ç”¨å®šæ—¶å™¨è°ƒæ•´æ¯ä¸€å¸§ä¹‹é—´çš„æ—¶é—´å·®ï¼Œä»è€Œåˆ¶é€ å‡ºæµç•…çš„åŠ¨ç”»æ•ˆæœã€‚

5. ç²’å­ç‰¹æ•ˆï¼šåœ¨æ¸¸æˆä¸­ï¼Œæœ‰å¾ˆå¤šéœ€è¦ç‰¹æ®Šæ•ˆæœçš„åœºæ™¯ï¼Œæ¯”å¦‚æ ‘è¢«ç å€’æ—¶ï¼Œéœ€è¦é£æº…å‡ºæœ¨å±‘å’Œæ ‘æã€‚ä½œè€…ä½¿ç”¨ Pygame çš„è’™ç‰ˆè¡¨é¢å’Œç²¾çµç»„ç»‡åŠŸèƒ½åˆ›å»ºäº†ä¸€äº›ç®€å•çš„ç²’å­ç‰¹æ•ˆï¼Œè¿™ä½¿å¾—æ¸¸æˆçœ‹èµ·æ¥æ›´åŠ çœŸå®ã€‚


# å†™ç‚¹è®°å½•
## 3.15 
ç¢°æ’çš„è¡¥å…¨ï¼Œä»Šå¤©æ˜¯è§†é¢‘P11 ç¢°æ’çš„å†…å®¹  
é¦–å…ˆæ”¹é”™ï¼Œä¸Šæ¬¡çš„å‘ç”Ÿç¢°æ’åç²¾çµå‘åé€€çš„åŸå› æ˜¯spriteé”™å†™æˆäº†selfï¼Œè‡³äºä¸ºä»€ä¹ˆæ²¡ææ‡‚ï¼Œå¯ä»¥æ•´ç†åå½“ä½œæ¯•ä¸šç­”è¾©çš„è®ºè¿°ï¼Œéœ€è¦å†™è¿›è®ºæ–‡  
ç„¶åä¸Šä¸‹çš„ç¢°æ’æœªå®ç°æ˜¯ä»¥ä¸ºæˆ‘æ²¡æœ‰å†™ï¼Œæ‰€ä»¥å½“æ—¶çœ‹è®ºæ–‡æ‰ä¼šåªæœ‰leftå’Œrightï¼Œè¿™å¹¶ä¸æ˜¯å·¦å³ä»£æ›¿äº†ä¸Šä¸‹è¿›è¡Œç¢°æ’åˆ¤æ–­ï¼Œå¾€åè¿˜éœ€ä»”ç»†é˜…è¯»ä»£ç ï¼ˆèœå°±æ˜¯èœï¼Œxibaï¼‰  
è¡¥é½äº†ä¸Šä¸‹çš„ç¢°æ’åˆ¤æ–­åæœ‰ä¸€å¥ `self.collision('horizontal')` éœ€è¦ææ‡‚ä¸ºä»€ä¹ˆï¼Œæœ‰æ€è·¯åè¡¥å…¨  
ç¬¬ä¸‰æ˜¯ä¿®æ”¹äº†ç²¾çµçš„åˆå§‹ä½ç½®ï¼Œåœ¨levelä¸­çš„setupçš„playerä¸­ï¼Œç›´æ¥è°ƒç”¨tmxä¸­è®¾ç½®å¥½çš„åˆå§‹ä½ç½®  
æœ€åæ˜¯è®¾ç½®äº†è¾¹ç•Œå’Œé«˜å¡ï¼Œåœ°å›¾ä¸­æœ‰ä¸€ä¸ªCollisionï¼Œåé¢æœ‰ä¸€æ®µæ”¹å®Œåä¼šç›´æ¥å°†è¾¹ç•Œæ˜¾ç¤ºï¼Œé‚£ä¸€æ®µä¸ºä»€ä¹ˆéœ€è¦ææ¸…æ¥š  
å°±è¿™ä¹ˆå¤š  
#### æ¢è¡Œæ˜¯ç©ºæ ¼ï¼Œmdçš„æ ¼å¼ç¬¦åè¦ç©ºæ ¼

## 3.17 3.18 P12
è‹¹æœçš„åˆ›å»ºå’Œé‡‡æ‘˜ï¼Œæ ‘æœ¨ç ä¼çš„åˆ¤å®šï¼Œå·¥å…·ä½¿ç”¨çš„åˆ¤å®š ä»Šå¤©æ˜¯è§†é¢‘P12çš„å†…å®¹
åˆ›é€ è‹¹æœå¼€å§‹ï¼Œå…ˆå¯¼å…¥ï¼Œsettingsä¸­æœ‰`APPLE_POS`å¯ä»¥ç¡®å®šè‹¹æœçš„ç”Ÿæˆä½ç½®,  
å»ºç«‹æœå®çš„ä½ç½®ï¼Œå…ˆå®Œæˆä¸€ä¸ªforå¾ªç¯ï¼Œå»ºç«‹ä¸€ä¸ªéšæœºæ•°,è¿›è¡Œè‹¹æœçš„éšæœºç”Ÿæˆ,è°ƒç”¨classç±»çš„Generic,æœ‰å››ä¸ªå˜é‡,pos\surf\groupè¿˜æœ‰ä¸€ä¸ªzï¼Œsurfå¾ˆç®€å•ï¼Œå°±æ˜¯`surf = self.apple_surf`ç›´æ¥èµ‹å€¼,  
è€Œgroupæ˜¯ï¼Ÿ`groups=[self.apple_sprites,self.groups()[0]]`,  
zç›´æ¥å¼•ç”¨è´´å›¾çš„è®¾ç½®`z = LAYERS['fruit']`ï¼Œposæ˜¯ä¸¤ä¸ªå€¼xå’Œyï¼Œ`x = pos[0] + self.rect.left`æ„æ€å°±æ˜¯ä»çª—å£æœ€å·¦è¾¹åˆ°æ ‘çš„è·ç¦»ï¼ŒyåŒç†ã€‚æœ€åè°ƒç”¨create_frultå°±ä¼šç”Ÿæˆè‹¹æœ  
æ ‘çš„å±æ€§(tree attributes)ï¼Œå…ˆç»™ä¸€ä¸ªå¥åº·å€¼healthï¼Œå†ç»™ä¸€ä¸ªaliveï¼Œå¯¹æ ‘æ´»ç€çš„åˆ¤æ–­å¹¶èµ‹å€¼ä¸ºtrueï¼Œå› ä¸ºæ ‘çš„ç²—ç»†çš„ä¸åŒçš„æ‰€ä»¥è°ƒç”¨æ—¶åº”è¯¥åšä¸€ä¸ªåˆ¤æ–­`f'../graphics/stumps/{"small" if name == "Small" else "large"}.png'`ç„¶ååœ¨è½¬æ¢ï¼Œè½¬æ¢ï¼Ÿï¼Ÿï¼Ÿ  
è¿˜éœ€è¦ä¸€ä¸ª`invul_timer`ï¼Ÿï¼Ÿï¼Ÿ  
å¦ä¸€ä¸ªæ–¹æ³•damageï¼Œå¥åº·å€¼-1ï¼Œè¿˜è¦ç§»é™¤ä¸€ä¸ªè‹¹æœï¼Œå¦‚æœæ•°é‡ä¸º0åˆ™æ²¡æœ‰æ„ä¹‰ï¼Œæ‰€ä»¥å…ˆåšä¸€ä¸ªåˆ¤æ–­è‹¹æœçš„æ•°é‡æ˜¯å¤§äºé›¶çš„ï¼Œ`random_apple = choice(self.apple_sprites.sprites()) random_apple.kill()`ï¼Ÿï¼Ÿï¼Ÿè§£æƒ‘  
è¿™ä¸ªæ–¹æ³•å°†ä¼šå‘ç”Ÿåœ¨levelä¸­ï¼Œè°ƒç”¨æ–¹æ³•å…ˆï¼Œåœ¨setupä¸­çš„  
`for obj in tmx_data.get_layer_by_name('Trees') :
    Tree((obj.x,obj.y),obj.image,[self.all_sprites,self.collision_sprites,self.tree_sprites],obj.name)` è¦ä¿è¯self.all_spritesä¸ºç¬¬ä¸€é¡¹ï¼Œå¦åˆ™`groups=[self.apple_sprites,self.groups()[0]],`ä¼šæ— æ³•è¿è¡Œã€‚ç„¶ååœ¨#playerä¸­å‡å¦‚å‚æ•°`trees = self.tree_sprites`,ç„¶åå†playerçš„_init_æ–¹æ³•ä¸­åŠ å…¥é»˜è®¤å‚æ•°tree_sprites,ç„¶ååœ¨å°¾éƒ¨åŠ å…¥#interaction`self.tree_sprites = tree_sprites`ï¼Œç„¶åå†use_toolsæˆ‘ä»¬åŠ å…¥åˆ¤æ–­ä¸‰ç§å·¥å…·çš„ä½¿ç”¨ï¼Œå› ä¸ºæ˜¯ç ä¼ï¼Œæ‰€ä»¥æš‚æ—¶åªåšæ–§å¤´axeçš„ï¼Œä¸ºæ­¤å…ˆå‡†å¤‡å®šä½ï¼Œå®šä¹‰æ–¹æ³•`def get_target_pos(self)`settingsä¸­æœ‰å·¥å…·çš„å®šä½ï¼Œç›´æ¥è°ƒç”¨å³å¯ï¼Œè®°å¾—æ›´æ–°
ï¼Œç»§ç»­åˆ¤æ–­å·¥å…·çš„ä½¿ç”¨ 
`if self.selected_tool == 'axe' :
     for tree in self.tree_sprites.sprites() :
        if tree.rect.collidepoint(self.target_pos) :
            tree.damge()`
æœ€åå¾—åˆ°æ ‘æœ¨å¥åº·-1çš„æ–¹æ³•è°ƒç”¨ï¼Œç»“æŸè¿™ä¸€æ®µï¼Œä½†åˆ°æ­¤ç»“æŸçš„è¯ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œæœªä½¿ç”¨å·¥å…·ä¹Ÿä¼šå¯¼è‡´è‹¹æœçš„æ”¶é›†ï¼Œæ‰€ä»¥å†timerä¸­updateå‡½æ•°éœ€è¦ä¿®æ”¹ 
```
def update(self) :
    current_time = pygame.time.get_ticks()
    if current_time - self.start_time >= self.duration :
        # self.deactivate() å¦‚æœåœ¨è¿™é‡Œï¼Œæ¯æ¬¡è¿è¡Œåéƒ½ä¼šå½’é›¶ï¼Œä¸‹é¢çš„åˆ¤æ–­ä¸ä¼šç”Ÿæ•ˆ
        if self.func and self.start_time != 0 :
            self.func()  
        self.deactivate()   # å¼€å§‹åˆ¤æ–­
```
è¿™é‡Œå…ˆè§£é‡Šç¬¬äºŒä¸ªifåˆ¤æ–­è¯­å¥ï¼Œ`and self.start_time != 0`ï¼Ÿï¼Ÿï¼Ÿ  
ç„¶åä¸€å¼€å§‹deactivateæ˜¯å†ç¬¬äºŒä¸ªifè¯­å¥ä¸Šæ–¹çš„ã€‚ã€‚ã€‚ã€‚ï¼ˆğŸ‘†åŸå› æœ‰å†™ï¼‰æ›´æ”¹åï¼Œç¨‹åºæ­£å¸¸ï¼Œå¼€å§‹å¢åŠ ç æ ‘çš„éƒ¨åˆ†ï¼Œå®šä¹‰å‡½æ•°check_death,åˆ¤æ–­å¼•ç”¨ï¼Œå½“_init_å‡½æ•°ä¸­çš„healthç»è¿‡damgeå‡½æ•°çš„è°ƒç”¨å¯¼è‡´health<=0æ—¶ï¼Œæ ‘æœ¨æ­»äº¡æ¡ä»¶æˆç«‹ï¼Œè®°å¾—è°ƒç”¨æ›´æ–°ï¼Œaliveåˆ¤æ–­æœªfalseï¼Œï¼Ÿï¼Ÿï¼Ÿ
'''
def check_death(self) :
    if self.health <= 0 :
        # print('dead')
        self.image = self.stump_surf
        self.rect = self.image.get_rect(midbottom = self.rect.midbottom)
        self.hitbox = self.rect.copy().inflate(-10,-self.rect.height * 0.6) # w,h
        self.alive = False
'''  
ï¼Ÿï¼Ÿï¼Ÿä»£è¡¨æ²¡å†™å®Œæˆ–è€…æœ‰ç–‘é—®ï¼Œåç»­è®ºæ–‡è¡¥å……ï¼Œåå…«å·ä»»åŠ¡å®Œæˆï¼Œmdçš„ä»£ç å—å’Œæ’å…¥å›¾ç‰‡éœ€è¦å­¦ä¹ ä¸€ä¸‹ï¼Œgiao

## 3.25 P13
è‹¹æœæ ‘æ¶ˆå¤±çš„ç²’å­ç‰¹æ•ˆ,æ•´ä½“å¯å†™çš„ä¸å¤š,åªè¦æŠŠå‚æ•°å…¨éƒ¨ææ˜ç™½å†™ä¸Šå°±è¡Œï¼Œè¿™é‡Œä¸è¿‡å¤šèµ˜è¿°ï¼Œé©¬ä¸Šä¸Šè¯¾äº†

## 3.27 P14
ç©å®¶åº“å­˜
å»ºç«‹å­—å…¸è¿›è¡Œç‰©å“çš„å­˜å‚¨ `self.item_inventory` ,éœ€è¦é“¾æ¥playerå’Œspritesä¸­çš„Treeç±»,å¿…é¡»åœ¨levelä¸­å®Œæˆé“¾æ¥,
åœ¨levelä¸­æ·»åŠ player_addç±»,è·å– `self.player.item_inventory[item]` æ•°å€¼æ˜¯+= 1,ä¼šæ›´åŠ æ–¹ä¾¿äº›,è¿™æ„å‘³ç€åœ¨setupä¸­éœ€è¦
æ›´æ–°åˆ›å»ºtree,æ·»åŠ çš„ `player_add = self.player_add` å¹¶ä¸”ç¡®ä¿åªåœ¨å†…éƒ¨è°ƒç”¨,åœ¨spritesä¸­çš„treeç±»ä¸­çš„__init__æ·»åŠ 
player_addå‚æ•°ï¼Œå¹¶åœ¨å†…éƒ¨è°ƒç”¨,å½“æ ‘è¢«ç ´åæ—¶ï¼Œå°†ä¼š `self.player_add('apple')` è¿™å°†å®Œæˆè‹¹æœå­˜å‚¨çš„æ“ä½œï¼Œæ ‘çš„æ“ä½œåŒç†
åœ¨ `def check_death(self)` ä¸­è°ƒç”¨ `self.player_add('wood')` ,åœ¨æ ‘æœ¨æ”¶é›†å®Œæˆã€‚

## 3.28 p15
æ–°çš„ä¸€å¤©å¼€å§‹  
ä½¿ç”¨ç”¨tiledä¸­playerå›¾å±‚ä¸­çš„Bedé€‰é¡¹,å°†è¿™ä¸€å—åŒºåŸŸè®¾ç½®ä¸ºâ€œç¡è§‰â€çš„åˆ¤å®šåŒºåŸŸï¼Œå½“ç©å®¶æ§åˆ¶spritesç§»åŠ¨åˆ°è¯¥åŒºåŸŸå¹¶ä¸”æŒ‰å›è½¦æ—¶ï¼Œåˆ¤å®š
ç©å®¶å°†æ‰§è¡Œç¡è§‰å¹¶è¿›å…¥æ–°çš„ä¸€å¤©çš„æ“ä½œ,åœ¨spritesä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»ä¸ºinstruction,ç±»çš„å±æ€§ç»§æ‰¿Generic,åˆå§‹åŒ–å¯¹è±¡çš„å±æ€§ä¸­æœ‰pos, size, groups, name
è¿™é‡Œä¸éœ€è¦surfaceï¼Œå› ä¸ºæ— è®ºå¦‚ä½•ï¼Œè¿™ç§spritesæ°¸ä¸å¯è§, `surf = pygame.Surface(size)` ,ç°åœ¨è¦ç»§æ‰¿å¤šä¸ªçˆ¶ç±»æ–¹æ³•æ‰€ä»¥è°ƒç”¨
superæ–¹æ³• `super().__init__(pos, surf, groups)` ï¼Œç°åœ¨åœ¨levelä¸­çš„æ’­æ”¾å™¨è®¾ç½®ï¼Œåˆ¤æ–­ç©å®¶æ˜¯å¦æ˜¯åœ¨'Bed'åŒºåŸŸä¸­ï¼Œå¯¼å…¥spritesä¸­çš„Interactionå¹¶ä¸”èµ‹å‚æ•°,  
`
if obj.name == 'Bed' :  
    Interaction(pos = (obj.x,obj.y),  
                size = (obj.width,obj.height),  
                groups = self.interaction_sprites,  
                name = 'Bed' # obj.name  
                )
`
nameç”¨'Bed'æˆ–è€…obj.nameéƒ½å¯ä»¥ï¼Œç°åœ¨å°† `interaction = self.interaction_sprites` åŠ å…¥å¾ªç¯ä¸­çš„åˆ¤å®šï¼Œå¹¶åœ¨playerçš„å†…éƒ¨
åŠ å…¥å‚æ•°interactionï¼Œç°åœ¨å°±æ£€æŸ¥ç©å®¶æ˜¯å¦åœ¨åˆ¤å®šçš„åŒºåŸŸå†…å¹¶æŒ‰ä¸‹äº†å›è½¦ï¼Œç°åœ¨åˆ¤æ–­è¾“å…¥å›è½¦æ—¶ï¼Œç©å®¶æ˜¯å¦Bed spriteç›¸é‡å 
`collided_interaction_sprites = pygame.sprite.spritecollide(self,self.interaction,False)` 
ä¸‰ä¸ªå€¼åˆ†åˆ«æ˜¯sprite, group, dokillï¼Œç¡®å®šç©å®¶çš„çŠ¶æ€åï¼Œå¼€å§‹é‡å¯å…³å¡çš„å·¥ä½œï¼Œé‡å¯å…³å¡æ„å‘³ç€æ‰€æœ‰æ ‘ä¼šå¾—åˆ°æ–°çš„è‹¹æœï¼Œå¦‚æœè¿˜æ´»ç€çš„æ ‘
éœ€è¦é‡ç½®æ•´ä¸ªlevelï¼Œtreeè°ƒç”¨å®Œæˆçš„å‡½æ•°create_fruitï¼Œå†ä½¿ç”¨forå¾ªç¯è¿›è¡Œæ¶ˆé™¤ç°æœ‰çš„è‹¹æœçš„æ“ä½œï¼Œè¿™åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªé‡ç½®ï¼Œç°åœ¨éœ€è¦
ç©å®¶é‡ç½®å’Œç”»é¢è¿‡æ¸¡ä¸€èµ·è¿è¡Œï¼Œç°åœ¨playerä¸­å®šä¹‰sleepçš„çŠ¶æ€ä¸ºFalseï¼Œå¦‚æœç©å®¶æŒ‰ä¸‹å›è½¦ï¼Œè®¾ç½®ä¸ºTrueï¼Œç©å®¶æ˜¯å¦è¿›è¡Œsleepæ“ä½œçš„åˆ¤æ–­
å°±è¿™æ ·ï¼Œç°åœ¨å¼€å§‹è¿‡æ¸¡ï¼Œåˆ›å»ºè¿‡æ¸¡ç”¨çš„ç±»transitionï¼Œå®šä¹‰å¸¸ç”¨çš„setupè®¾ç½®ï¼Œåˆ›å»ºè¦†ç›–å±‚ï¼Œè®¾ç½®å®½åº¦å’Œé«˜åº¦ï¼Œå³çª—å£çš„å¤§å°è·å–ï¼Œcolorä¸º255
è®¾ç½®å›¾åƒå¡«å……ï¼Œå¯¼å…¥åˆ°levelä¸­ï¼Œç°åœ¨å›¾åƒä¼šä»å…¨ç™½å¿«é€Ÿåˆ°é»‘è‰²ï¼Œè¿™æ˜¯æ­£ç¡®çš„ï¼Œæ¯ä¸€å¸§çš„é¢œè‰²éƒ½æ˜¯å˜å¾—è¶Šæ¥è¶Šæš—ï¼ŒåŠ å…¥å‚æ•° `special_flags = pygame.BLEND_RGBA_MULT`
ä¼šä½¿å˜åŒ–æ›´å¥½çš„è¿‡æ¸¡ï¼Œä½†å› ä¸ºself.colorè¿ç®—åä¼šä¸ºè´Ÿæ•°ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼Œéœ€è¦åŠ ä¸Šåˆ¤æ–­speedè¦ä¹˜ä»¥è´Ÿä¸€ï¼Œcolorè¶…è¿‡äºŒäº”äº”è¦é‡æ–°èµ‹å€¼
ç°åœ¨è¿˜æœ‰ä¸‰ä»¶äº‹ï¼Œé‡ç½®æ–¹æ³•ï¼Œå”¤é†’å±‚ï¼Œè®¾ç½®é€Ÿåº¦ä¸º-2åœ¨ç»“æŸè¿‡æ¸¡æ—¶ï¼Œ
åœ¨ç¡è§‰æ—¶ç§»åŠ¨æ˜¯å¥‡æ€ªçš„ï¼Œéœ€è¦åŠ ä¸Šç¡è§‰æ—¶ç§»åŠ¨è¦èµ‹å€¼ä¸ºFalse

## 3.29 p16
è€•ç§çš„åœŸå£¤
å¯¼å…¥spritesæ–¹ä¾¿ç®¡ç†ï¼Œpygame.image.loadå¯¼å…¥åœŸå£¤çš„å›¾soil_surfï¼Œè¿™é‡Œæœ‰ä¸‰ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ï¼Œé¦–å…ˆåˆ¤æ–­è¯¥åœ°åŒºæ˜¯å¦é€‚åˆè€•ç§ï¼Œå…¶æ¬¡åœ°åŒºæ˜¯å¦è¶…è¿‡è¾¹ç•Œï¼Œæœ€ååˆ¤æ–­åœŸå£¤é‡Œæ˜¯å¦æœ‰å…¶ä»–æ¤ç‰©ï¼Œæ‰€ä»¥è¦æ±‚å‡ºå…¨éƒ¨çš„å¯è€•ç§é‚£ä¸ªç“·ç –åœ°æ ¼ï¼Œåœ¨map.tmxä¸­çš„Farmableæ˜¯å¯è€•ç§ä½ç½®,æ±‚å‡ºåœ°å›¾çš„é«˜å’Œå®½å…±æœ‰å¤šå°‘å—ç“·ç –ï¼Œtiledä¸­çš„åœ°å›¾å±æ€§ä¹Ÿæœ‰ï¼Œåˆ›å»ºåˆ—è¡¨ä½¿æ¯ä¸€å—ç“·ç –éƒ½åœ¨å…¶ä¸­ï¼Œæ ‡è®°å¥½å¯è€•ç§çš„ç“·ç –åœ°å—åï¼Œåˆ›å»ºæ–°æ–¹æ³•create_hit_rectså’Œæ–°çš„åˆ—è¡¨ï¼Œå¯¹å­˜å‚¨çš„åœ°å—å¾ªç¯ï¼Œå…ˆè¡Œååˆ—ï¼Œå†è¿›è¡Œæšä¸¾,è¿›è¡Œåˆ¤æ–­å¦‚æœåœ°å—å†åˆ—è¡¨ä¸­çš„ä½ç½®æ˜¯æœ‰'F'è¡¨ç¤ºçš„ï¼Œé‚£ä¹ˆè¾“å‡ºè¿™ä¸ªåœ°å—çš„åˆ—è¡¨ä½ç½®ï¼Œxçš„ä½ç½®æ˜¯åˆ—è¡¨ä½ç½®ä¹˜ä»¥ç“·ç –å¤§å°ï¼Œyçš„ä½ç½®åŒç†ï¼Œæœ€åå°†æ‰€æœ‰çš„å€¼èµ‹ç»™ç©ºçš„åˆ—è¡¨ä¸­ï¼Œç”³è¯·æ–°çš„å‡½æ•°get_hitï¼Œåˆ›å»ºå·¥å…·çš„ç¢°æ’ç‚¹è¿›è¡Œåˆ¤æ–­ï¼Œè·å–xå’Œyï¼Œx = rect.x // TILE_SIZEå’Œy = rect.y // TILE_SIZEä»¥æ­¤æ¥è·å–å¹³é“ºçš„ä½ç½®ï¼Œæ£€æŸ¥åˆ—è¡¨ä¸­æ˜¯å¦æœ‰'F',å…ˆè·å–åˆ—ï¼Œå†åˆ°è¡Œä¸­è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœå«æœ‰'F'ï¼Œåˆ™å†åˆ—è¡¨ä¸­append('X')ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šé€šè¿‡SoilLayerå‰å¾€playerå‘ç”Ÿå†levelå†…éƒ¨çš„setupä¸­çš„Playerä¸­soil_layer,å†playerä¸­åŠ ä¸Šå±æ€§soil_layer,æœ€ååœ¨interactionä¸­æŠŠå‚æ•°å˜ä¸ºå®é™…å±æ€§ï¼Œç°çŠ¶ä½¿ç”¨å·¥å…·æ—¶ï¼Œè°ƒç”¨soil_layer.get_hit(self.target_pos),ç°åœ¨å‰é¢èµ‹å€¼xçš„åœ°æ–¹åˆ›å»ºä¸€ä¸ªåœŸå£¤ç“¦ç‰‡SoilTileï¼Œè¿™æ ·å°±å®Œæˆäº†è€•åœ°çš„åˆ›å»º

## 3.29 P18 p17æœªä½œ
æµ‡æ°´çš„é€»è¾‘
ä¸è€•ç§çš„åœŸå£¤é€»è¾‘ç›¸ä¼¼ï¼Œé¦–å…ˆå†use_toolä¸­å°†soil_layerå†™å…¥æ°´å£¶çš„åˆ¤æ–­ä¸­ï¼Œç»™äºˆå‚æ•°self.target_posï¼Œå†sioilä¸­åˆ›å»ºæ–°çš„æ–¹æ³•
waterç”¨æ¥è·å–æµ‡æ°´çš„ä½ç½®ï¼Œæœ‰ä¸¤ä»¶äº‹è¦åšåœ¨è¿™é‡Œï¼Œé¦–å…ˆæ˜¯å°†åˆ—è¡¨ä¸­çš„è€•åœ°è¡¨åŠ ä¸Š'w'è¿›è¡Œæ ‡è®°ï¼Œå…¶æ¬¡æ˜¯å®šä¹‰ä¸€ä¸ªWaterTileçš„ç±»è¡¨ç¤ºè¿™å—è€•åœ°ä¸Šæœ‰æ°´ï¼Œå†ç±»ä¸­æœ‰ä¸‰ä»¶äº‹è¦åšï¼Œé¦–å…ˆæ˜¯å¤åˆ¶åœŸå£¤è€•åœ°çš„ä½ç½®æ„å‘³ç€æ°´ç“¦çš„ä½ç½®åº”è¯¥å’Œè€•åœ°çš„ä½ç½®ç›¸åŒï¼Œå…¶æ¬¡æ˜¯å¯¼å…¥å›¾åƒçš„è·¯å¾„ï¼Œæœ€å
é‡æ–°å¼€å§‹çš„ä¸€å¤©ï¼Œæ°´ä¼šæ¶ˆå¤±ï¼Œæ¶ˆå¤±çš„æ°´ç –å®šä¹‰ä¸ºremove_waterï¼Œæ£€è§†Self.gridä¸­çš„'W'å¹¶ä¸”åˆ é™¤ï¼Œæœ€åå†levelä¸­çš„resetä¸­è°ƒç”¨æ–¹æ³•
å®Œæˆæ°´ç –çš„æ¶ˆé™¤

## 4.7 p20 p21 p19
åˆ›å»ºä½œç‰©  
è¿™æ˜¯ä¸€ä¸ªæ’­ç§å‡½æ•°ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š
- `target_pos` æ˜¯ç§å­è½åœ¨çš„ä½ç½®ã€‚
- `seed` æ˜¯è¦ç§æ¤çš„ç§å­ç±»å‹ã€‚
- éå†æ‰€æœ‰åœŸåœ°ç –å—ï¼ŒæŸ¥æ‰¾å“ªä¸ªç –å—ä¸ç›®æ ‡ä½ç½®ç¢°æ’ã€‚
- å¦‚æœæ‰¾åˆ°ç¢°æ’çš„åœŸåœ°ç –å—ï¼Œåˆ™åœ¨è¯¥ç –å—çš„ä½ç½®ä¸Šç”Ÿæˆä¸€ä¸ªæ–°çš„ Plant å¯¹è±¡ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ç›¸åº”çš„ç²¾çµç»„ä¸­ã€‚
- åˆ›å»ºçš„ Plant å¯¹è±¡ä¼šä½¿ç”¨å›è°ƒå‡½æ•° `check_watered` æ¥æ£€æŸ¥å‘¨å›´çš„æ°´ç –å—æ˜¯å¦è¢«æµ‡æ°´è¿‡.  
è¿™ä¸ªå‡½æ•°ç”¨äºä½¿ç”¨å½“å‰é€‰æ‹©çš„ç§å­ï¼Œåœ¨ç›®æ ‡ä½ç½®ç§æ¤æ¤ç‰©ã€‚å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š
- åˆ¤æ–­å½“å‰é€‰æ‹©çš„ç§å­æ˜¯å¦å­˜åœ¨äºç§å­åº“ä¸­ã€‚
- å¦‚æœå­˜åœ¨ï¼Œä½¿ç”¨ `plant_seed` å‡½æ•°åœ¨ç›®æ ‡ä½ç½®ç§æ¤å¯¹åº”ç±»å‹çš„æ¤ç‰©ï¼Œå¹¶æ›´æ–°ç§å­åº“ä¸­è¯¥ç±»å‹ç§å­çš„æ•°é‡ã€‚  
è¿™ä¸ªç±»ä»£è¡¨äº†ä¸€ä¸ªæ¤ç‰©å¯¹è±¡ï¼Œç”¨äºè¡¨ç¤ºåœ¨åœŸåœ°ä¸Šç”Ÿé•¿çš„æ¤ç‰©ã€‚å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š
- `plant_type` æ˜¯æ¤ç‰©çš„ç±»å‹ï¼Œç”¨äºæŸ¥æ‰¾æ­£ç¡®çš„å›¾åƒå¸§ã€‚
- `groups` æ˜¯æ­¤æ¤ç‰©æ‰€å±çš„ç²¾çµç»„ã€‚
- `soil` æ˜¯æ­¤æ¤ç‰©ç§æ¤åœ¨å“ªå—åœŸåœ°ä¸Šã€‚
- `check_watered` æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºæ£€æŸ¥è¯¥æ¤ç‰©é™„è¿‘çš„æ°´ç –å—æ˜¯å¦è¢«æµ‡æ°´è¿‡ã€‚
- `age` æ˜¯æ¤ç‰©çš„å¹´é¾„ï¼Œå†³å®šäº†å®ƒçš„æˆç†Ÿç¨‹åº¦ã€‚
- `max_age` æ˜¯æ¤ç‰©æœ€å¤§çš„å¹´é¾„ã€‚
- `grow_speed` æ˜¯æ¤ç‰©æˆé•¿çš„é€Ÿåº¦ã€‚
- `image` æ˜¯æ¤ç‰©å½“å‰å¹´é¾„å¯¹åº”çš„å›¾åƒè¡¨é¢ã€‚
- `y_offset` æ˜¯æ¤ç‰©å›¾åƒç›¸å¯¹äºåœŸåœ°çŸ©å½¢åº•éƒ¨ä¸­å¿ƒç‚¹çš„ y åç§»é‡ï¼Œç”¨äºè®©æ¤ç‰©å›¾åƒä¸åœŸåœ°å›¾åƒé‡å ã€‚
- `rect` æ˜¯æ¤ç‰©çš„çŸ©å½¢ï¼Œä»£è¡¨äº†å®ƒåœ¨æ¸¸æˆä¸–ç•Œä¸­çš„ä½ç½®å’Œå¤§å°ã€‚
- `z` æ˜¯æ¤ç‰©çš„ z åæ ‡ï¼Œå†³å®šäº†å®ƒåœ¨æ¸¸æˆä¸–ç•Œä¸­çš„æ˜¾ç¤ºé¡ºåºã€‚
- `harvestable` è¡¨ç¤ºæ¤ç‰©æ˜¯å¦å¯ä»¥è¢«æ”¶è·ã€‚

è¿˜æœ‰ä¸€ä¸ª `grow` æ–¹æ³•ï¼Œä¼šæ ¹æ®æ¤ç‰©æ˜¯å¦è¢«æµ‡æ°´è¿‡ï¼Œè‡ªåŠ¨æ›´æ–°æ¤ç‰©çš„å¹´é¾„ã€æˆç†Ÿåº¦å’Œæ˜¾ç¤ºçŠ¶æ€ã€‚æ–¹æ³•å…·ä½“å®ç°å¦‚ä¸‹ï¼š
- å¦‚æœè¯¥æ¤ç‰©é™„è¿‘çš„æ°´ç –å—å·²ç»è¢«æµ‡æ°´è¿‡ï¼Œåˆ™å¢åŠ æ¤ç‰©å¹´é¾„ã€‚
- å¦‚æœæ¤ç‰©å·²ç»æˆç†Ÿäº†ï¼Œå°†å…¶æ ‡è®°ä¸ºå¯æ”¶è·çŠ¶æ€ã€‚
- æ ¹æ®å½“å‰å¹´é¾„ï¼ŒæŸ¥æ‰¾å¯¹åº”çš„å›¾åƒå¸§ï¼Œå¹¶æ›´æ–°æ¤ç‰©çš„å›¾åƒè¡¨é¢ã€‚
- è°ƒæ•´æ¤ç‰©çš„çŸ©å½¢ä½ç½®ï¼Œä½¿å…¶ä¸åœŸåœ°é‡å ã€‚

æ”¶è·  
Plant_collisionå‡½æ•°å®ç°äº†æ¸¸æˆä¸­ç©å®¶ä¸æ¤ç‰©ä¹‹é—´çš„ç¢°æ’æ£€æµ‹å’Œä½œç‰©æ”¶è·çš„é€»è¾‘ã€‚åœ¨ `plant_collision` æ–¹æ³•ä¸­ï¼Œé¦–å…ˆé€šè¿‡è®¿é—® `self.soil_layer.plant_sprites` å±æ€§æ¥è·å–æ‰€æœ‰çš„æ¤ç‰©ç²¾çµç»„ï¼ˆSprite Groupï¼‰ã€‚ç„¶åï¼Œéå†è¿™ä¸ªç²¾çµç»„ä¸­çš„æ¯ä¸€ä¸ªæ¤ç‰©ï¼Œå¦‚æœè¯¥æ¤ç‰©æ˜¯å¯æ”¶è·çŠ¶æ€ï¼Œä¸”å…¶çŸ©å½¢åŒºåŸŸï¼ˆhitboxï¼‰ä¸ç©å®¶è§’è‰²çš„çŸ©å½¢åŒºåŸŸå‘ç”Ÿç¢°æ’ï¼Œåˆ™æ¶ˆé™¤è¯¥æ¤ç‰©å¯¹åº”çš„ç²¾çµï¼Œå¹¶é‡Šæ”¾èµ„æºï¼ˆkill() æ–¹æ³•ï¼‰ã€‚å°†è¯¥æ–¹æ³•æ”¾å…¥åœ¨æ¸¸æˆä¸»å¾ªç¯ä¸­ï¼Œä»¥ä¸€å®šçš„é¢‘ç‡è¿›è¡Œè°ƒç”¨ï¼Œä»¥ä¿æŒæ¸¸æˆçš„æ­£å¸¸è¿è¡Œã€‚  

é›¨  
è¿™æ˜¯ä¸€ä¸ªå®ç°ä¸‹é›¨æ•ˆæœçš„ Python ç±» `Drop`ï¼Œç»§æ‰¿è‡ª `Generic`ï¼Œå…·æœ‰ä»¥ä¸‹æ–¹æ³•ï¼š

1. `__init__(self, pos, moving, surf, groups, z)`ï¼šåˆå§‹åŒ–å‡½æ•°ï¼Œæ¥æ”¶äº”ä¸ªå‚æ•°ã€‚`pos` è¡¨ç¤ºåˆå§‹ä½ç½®ï¼Œ`moving` è¡¨ç¤ºè¯¥å…ƒç´ æ˜¯å¦ä¼šç§»åŠ¨ï¼Œ`surf` è¡¨ç¤ºè¦æ˜¾ç¤ºçš„å›¾ç‰‡ï¼Œ`groups` è¡¨ç¤ºç²¾çµç»„ï¼ˆå¯ä»¥æ˜¯å•ä¸ªç²¾çµç»„æˆ–å¤šä¸ªç²¾çµç»„çš„åˆ—è¡¨ï¼‰ï¼Œ`z` è¡¨ç¤ºå±‚çº§æ·±åº¦ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œé€šè¿‡è°ƒç”¨ `super().__init__()` å‡½æ•°æ¥åˆå§‹åŒ– `Generic` çš„å®ä¾‹å˜é‡ï¼Œå¹¶ä¸”åˆå§‹åŒ–äº†ä¸€äº›é€šç”¨è®¾ç½®ï¼Œå¦‚ç”Ÿå­˜æ—¶é—´ã€å¼€å§‹æ—¶é—´ç­‰ã€‚å¦‚æœ `moving` ä¸º `True`ï¼Œåˆ™æ ¹æ®é€Ÿåº¦è®¡ç®—å‡ºé›¨æ»´çš„åˆå§‹ä½ç½®ã€ç§»åŠ¨æ–¹å‘å’Œé€Ÿåº¦ã€‚

2. `update(self,dt)`ï¼šæ›´æ–°å‡½æ•°ï¼Œæ¯æ¬¡æ›´æ–°æ—¶ï¼Œå°†æ ¹æ®é›¨æ»´çš„ç§»åŠ¨çŠ¶æ€ã€é€Ÿåº¦å’Œæ–¹å‘æ¥æ›´æ–°é›¨æ»´ä½ç½®ã€‚åŒæ—¶ï¼Œæ ¹æ®æ—¶é—´å·®æ£€æŸ¥é›¨æ»´çš„ç”Ÿå­˜æ—¶é—´æ˜¯å¦å·²ç»ç»“æŸï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†è‡ªå·±ä»ç²¾çµç»„ä¸­åˆ é™¤ã€‚

åœ¨è¿™ä¸ªç±»ä¸­ï¼Œä½¿ç”¨ Pygame å†…ç½®çš„å‘é‡æ¨¡å— `pygame.math.Vector2` æ¥å¤„ç†é›¨æ»´çš„ç§»åŠ¨ï¼Œè¿™ä¸ªæ¨¡å—æä¾›äº†å‘é‡ç›¸å…³çš„å¸¸ç”¨å‡½æ•°å’Œè¿ç®—ç¬¦ï¼Œè¾ƒä¸ºæ–¹ä¾¿åœ°å®ç°äº†ç‰©ä½“çš„ä½ç§»ã€æ—‹è½¬å’Œç¼©æ”¾ç­‰æ“ä½œã€‚  
è¿™æ˜¯ä¸€ä¸ªå®ç°ä¸‹é›¨æ•ˆæœçš„ Python ç±» `Rain`ï¼Œå…·æœ‰ä»¥ä¸‹æ–¹æ³•ï¼š

1. `__init__(self, all_sprites)`ï¼šåˆå§‹åŒ–å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•° `all_sprites`ï¼ŒæŒ‡å‘åŒ…å«æ‰€æœ‰æ¸¸æˆç²¾çµçš„ Pygame ç²¾çµç»„ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæ ¹æ®é›¨æ»´å’Œåœ°é¢ç»†èŠ‚å…ƒç´ çš„å­˜å‚¨è·¯å¾„åˆ›å»ºäº†ä¸¤ä¸ªæ–‡ä»¶å¤¹å¯¹è±¡ï¼Œå¹¶ä¸”è·å–äº†æ•´å¼ åœ°å›¾çš„å°ºå¯¸ã€‚

2. `create_floor(self)`ï¼šåˆ›å»ºåœ°é¢ç»†èŠ‚å…ƒç´ å¯¹è±¡çš„æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šéšæœºé€‰æ‹©ä¸€å¼ åœ°é¢çº¹ç†å›¾ç‰‡ï¼Œå¹¶ä¸”åœ¨åœ°å›¾ä¸Šçš„éšæœºä½ç½®åˆ›å»ºä¸€ä¸ª `Drop` å¯¹è±¡ï¼Œä½œä¸ºåœ°é¢ç»†èŠ‚å…ƒç´ ã€‚

3. `create_drops(self)`ï¼šåˆ›å»ºé›¨æ»´å¯¹è±¡çš„æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šéšæœºé€‰æ‹©ä¸€å¼ é›¨æ»´å›¾ç‰‡ï¼Œå¹¶ä¸”åœ¨åœ°å›¾ä¸Šçš„éšæœºä½ç½®åˆ›å»ºä¸€ä¸ª `Drop` å¯¹è±¡ï¼Œä½œä¸ºé›¨æ»´ã€‚

4. `update(self)`ï¼šæ›´æ–°å‡½æ•°ï¼Œç”¨äºå‘¨æœŸæ€§åœ°åˆ›å»ºé›¨æ»´å’Œåœ°é¢ç»†èŠ‚å…ƒç´ ã€‚è¿™ä¸ªæ–¹æ³•ä¼šè°ƒç”¨ `create_drops()` å’Œ `create_floor()` æ–¹æ³•æ¥åˆ›å»ºé›¨æ»´å’Œåœ°é¢ç»†èŠ‚å…ƒç´ ï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ°æ‰€æœ‰ç²¾çµç»„ä¸­ã€‚

5. `Drop(Generic)`ï¼š`Rain` ç±»ä¸­å®šä¹‰çš„å†…éƒ¨ç±»ï¼Œè¡¨ç¤ºä¸€ä¸ªé›¨æ»´æˆ–åœ°é¢ç»†èŠ‚å…ƒç´ ã€‚è¿™ä¸ªç±»ç»§æ‰¿è‡ª `Generic` ç±»ï¼Œå…¶å®ä¾‹å¯ä»¥è¢«æ·»åŠ åˆ° Pygame ç²¾çµç»„ä¸­ã€‚åœ¨åˆå§‹åŒ–æ—¶ï¼Œä¼šéšæœºç”Ÿæˆé›¨æ»´çš„ç”Ÿå­˜æ—¶é—´ã€ç§»åŠ¨æ–¹å‘å’Œé€Ÿåº¦ã€‚åœ¨æ¯æ¬¡æ›´æ–°æ—¶ï¼Œé›¨æ»´ä¼šæ ¹æ®ç§»åŠ¨æ–¹å‘å’Œé€Ÿåº¦å˜åŒ–è‡ªèº«ä½ç½®ï¼ŒåŒæ—¶æ£€æŸ¥è‡ªèº«ç”Ÿå­˜æ—¶é—´æ˜¯å¦å·²ç»ç»“æŸï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†è‡ªå·±ä»ç²¾çµç»„ä¸­åˆ é™¤ã€‚

## 4.8 p22
ç™½å¤©åˆ°é»‘å¤œ  
è¿™ä¸ªç±»ä»£è¡¨äº†æ¸¸æˆä¸­çš„å¤©ç©ºï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š
- `display_surface` å±æ€§æ˜¯ Pygame æ˜¾ç¤ºç•Œé¢è¡¨é¢ã€‚
- `full_surf` æ˜¯ä¸€ä¸ªé»‘è‰²è¡¨é¢ï¼Œä¸å±å¹•å¤§å°ç›¸åŒä¸”ä½äºå±å¹•é¡¶éƒ¨ï¼Œç”¨äºé®ç›–å¤©ç©ºä¸Šæ–¹çš„å…ƒç´ ã€‚
- `start_color` æ˜¯è¡¨ç¤ºå¤©ç©ºå½“å‰é¢œè‰²çš„ RGB åˆ—è¡¨ã€‚
- `end_color` æ˜¯å¤©ç©ºå˜æš—æ—¶ç»“æŸçš„é¢œè‰²ã€‚
- `display()` æ–¹æ³•æ ¹æ®æ—¶é—´å·®å€¼ dt è°ƒæ•´å¤©ç©ºçš„é¢œè‰²ï¼Œå¹¶å°†é»‘è‰²è¡¨é¢è¦†ç›–åœ¨æ˜¾ç¤ºç•Œé¢ä¸Šï¼Œä»¥è¾¾åˆ°å¤©ç©ºé€æ¸å˜æš—çš„æ•ˆæœã€‚

## 4.9 p23
å•†åº—é¡µé¢  
è¿™æ˜¯ä¸€ä¸ªèœå•çš„ Python ç±»ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š

1. `__init__(self, player, toggle_menu)`ï¼šåˆå§‹åŒ–å‡½æ•°ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š`player` å’Œ `toggle_menu`ï¼Œåˆ†åˆ«æŒ‡å‘æ¸¸æˆä¸­å½“å‰ç©å®¶å¯¹è±¡å’Œå…³é—­èœå•çš„æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œè¿›è¡Œäº†ä¸€äº›é€šç”¨è®¾ç½®ï¼Œæ¯”å¦‚æ˜¾ç¤ºçª—å£ã€å­—ä½“ç­‰ã€‚ç„¶åæ ¹æ®ç©å®¶ç‰©å“æ¸…å•ç”Ÿæˆèœå•é€‰é¡¹ï¼Œå¹¶ä¸”åˆå§‹åŒ–é€‰é¡¹å¡çš„ä½ç½®å’Œç§»åŠ¨è®¡æ—¶å™¨ã€‚

2. `display_money(self)`ï¼šæ˜¾ç¤ºç©å®¶é‡‘é’±æ•°çš„æ–¹æ³•ã€‚

3. `setup(self)`ï¼šè®¾ç½®èœå•çš„æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šæ ¹æ®ç©å®¶ç‰©å“æ¸…å•åˆ›å»ºæ¯ä¸ªé€‰é¡¹çš„æ–‡æœ¬ Surfaceï¼Œå¹¶ä¸”è®¡ç®—å‡ºæ•´ä¸ªèœå•çš„æ€»é«˜åº¦ã€‚ç„¶åè®¾ç½®èœå•æ¡†çš„ä½ç½®å’Œå¤§å°ï¼Œå¹¶ä¸”åˆ›å»ºâ€œè´­ä¹°â€å’Œâ€œå‡ºå”®â€æ–‡æœ¬çš„ Surfaceã€‚

4. `input(self)`ï¼šå¤„ç†ç”¨æˆ·è¾“å…¥çš„æ–¹æ³•ã€‚å¦‚æœç©å®¶æŒ‰ä¸‹ Esc é”®ï¼Œåˆ™å…³é—­èœå•ï¼›å¦‚æœç©å®¶æŒ‰ä¸‹ä¸Šä¸‹ç®­å¤´é”®æˆ–ç©ºæ ¼é”®ï¼Œåˆ™è°ƒæ•´é€‰é¡¹å¡ä½ç½®å¹¶è¿›è¡Œç›¸åº”æ“ä½œï¼ˆå‡ºå”®æˆ–è´­ä¹°ç‰©å“ï¼‰ã€‚

5. `show_entry(self,text_surf,amount,top,selected)`ï¼šæ˜¾ç¤ºæŸä¸ªé€‰é¡¹å†…å®¹çš„æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šç»˜åˆ¶èƒŒæ™¯æ¡†ã€æ–‡æœ¬å’Œæ•°é‡ï¼Œå¹¶ä¸”å¦‚æœé€‰é¡¹è¢«é€‰ä¸­ï¼Œåˆ™ç»˜åˆ¶é€‰å®šæ¡†å’Œâ€œè´­ä¹°â€æˆ–â€œå‡ºå”®â€çš„æ–‡æœ¬ã€‚

6. `update(self)`ï¼šæ›´æ–°èœå•çš„æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šå…ˆå¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œç„¶åæ˜¾ç¤ºç©å®¶çš„é‡‘é’±æ•°ï¼Œå¹¶ä¸”è°ƒç”¨ `show_entry()` æ–¹æ³•ç»˜åˆ¶æ¯ä¸ªé€‰é¡¹çš„å†…å®¹ã€‚

## 4.10 p24
éŸ³ä¹çš„å®Œæˆ  
è¿™æ˜¯ä¸€ä¸ªåˆ›å»º Pygame éŸ³æ•ˆå¯¹è±¡çš„è¯­å¥ã€‚å…¶ä¸­ï¼Œ`self.axe_sound` æ˜¯ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œé€šè¿‡è°ƒç”¨ `pygame.mixer.Sound()` å‡½æ•°æ¥åˆ›å»ºéŸ³æ•ˆå¯¹è±¡ã€‚å‚æ•° `'../audio/å—¨å®³å—¨.wav'` æŒ‡å®šäº†éŸ³æ•ˆæ‰€åœ¨çš„æ–‡ä»¶è·¯å¾„ã€‚

è¿™ä¸ªè¯­å¥å‡è®¾ç¨‹åºè¿è¡Œç›®å½•ä¸‹æœ‰ä¸€ä¸ªåä¸º `'å—¨å®³å—¨.wav'` çš„éŸ³é¢‘æ–‡ä»¶ï¼Œç„¶åå°†å…¶åŠ è½½åˆ° `self.axe_sound` å˜é‡ä¸­ä»¥å¤‡æ’­æ”¾ã€‚

## 4.10 ä»£ç çš„æ•´ç†
### support
è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªå¯¼å…¥æ–‡ä»¶å¤¹çš„å‡½æ•° `import_folder`ï¼Œç”¨äºåœ¨æ¸¸æˆä¸­åŠ è½½æŒ‡å®šè·¯å¾„ä¸‹çš„æ‰€æœ‰å›¾åƒèµ„æºã€‚é€šè¿‡ `os.walk()` æ–¹æ³•éå†æŒ‡å®šè·¯å¾„åŠå…¶å­æ–‡ä»¶å¤¹ï¼Œç„¶åå°†æ¯ä¸ªæ–‡ä»¶è½¬æ¢ä¸ºè¡¨é¢ï¼Œå¹¶æ·»åŠ åˆ°è¡¨é¢åˆ—è¡¨ä¸­ã€‚  
åœ¨ `import_folder()` å‡½æ•°ä¸­ï¼Œé¦–å…ˆåˆå§‹åŒ–ä¸€ä¸ªç©ºçš„è¡¨é¢åˆ—è¡¨ã€‚ç„¶åé€šè¿‡ `os.walk()` æ–¹æ³•æ¥éå†æŒ‡å®šè·¯å¾„åŠå…¶å­æ–‡ä»¶å¤¹ï¼Œè·å–å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ—è¡¨ã€‚æ¥ç€ï¼Œéå†æ–‡ä»¶åˆ—è¡¨ï¼Œæ„å»ºå®Œæ•´è·¯å¾„ï¼Œå¹¶é€šè¿‡ `pygame.image.load()` æ–¹æ³•åŠ è½½å’Œè½¬æ¢å›¾åƒè¡¨é¢ï¼Œç„¶åå°†å…¶æ·»åŠ åˆ°è¡¨é¢åˆ—è¡¨ä¸­ã€‚æœ€åï¼Œè¿”å›è¡¨é¢åˆ—è¡¨ã€‚  
### timer
è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªè®¡æ—¶å™¨ç±» `Timer`ï¼Œç”¨äºåœ¨æ¸¸æˆä¸­å®ç°å„ç§å®šæ—¶æ“ä½œã€‚é€šè¿‡è®¾ç½®æŒç»­æ—¶é—´åŠç›¸åº”çš„å›è°ƒå‡½æ•°æ¥å®ç°å€’è®¡æ—¶æ•ˆæœç­‰ã€‚  
åœ¨ `Timer` ç±»ä¸­ï¼Œé¦–å…ˆå®šä¹‰æŒç»­æ—¶é—´å’Œå›è°ƒå‡½æ•°å±æ€§ï¼Œå¹¶åˆå§‹åŒ–å¼€å§‹æ—¶é—´å’Œæ¿€æ´»æ ‡å¿—å±æ€§ã€‚æ¥ç€ï¼Œæä¾›äº†æ¿€æ´»å’Œåœç”¨è®¡æ—¶å™¨çš„æ–¹æ³•ï¼Œä»¥åŠä¸€ä¸ªæ›´æ–°æ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­è®¡æ—¶å™¨æ˜¯å¦å·²ç»ç»“æŸï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„å›è°ƒå‡½æ•°ï¼ˆå¦‚æœå·²ç»å®šä¹‰ï¼‰ã€‚æœ€åï¼Œåœ¨è®¡æ—¶å™¨ç»“æŸæ—¶åœç”¨è®¡æ—¶å™¨ã€‚  
### transition
è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªè¿‡æ¸¡ç±» `Transition`ï¼Œç”¨äºåœ¨æ¸¸æˆä¸­å®ç°åœºæ™¯åˆ‡æ¢æ—¶çš„è¿‡æ¸¡æ•ˆæœã€‚è¿‡æ¸¡æ•ˆæœæ˜¯é€šè¿‡åœ¨å½“å‰å¸§ä¸Šå åŠ ä¸€å¼ é»‘è‰²è¡¨é¢ï¼Œå¹¶æ”¹å˜å…¶é€æ˜åº¦æ¥å®ç°çš„ã€‚  
åœ¨ `Transition` ç±»ä¸­ï¼Œé¦–å…ˆè®¾ç½®æ˜¾ç¤ºè¡¨é¢ã€é‡ç½®å‡½æ•°å’Œç©å®¶å¯¹è±¡ç­‰å±æ€§ã€‚ç„¶åï¼Œé€šè¿‡ `pygame.Surface()` æ–¹æ³•åˆ›å»ºä¸€ä¸ªé»‘è‰²å åŠ è¡¨é¢ï¼Œå¹¶åˆå§‹åŒ–é¢œè‰²å’Œé€Ÿåº¦å±æ€§ã€‚åœ¨ `play()` æ–¹æ³•ä¸­ï¼Œæ¯æ¬¡æ›´æ–°é¢œè‰²å±æ€§å’Œé»‘è‰²è¡¨é¢ï¼Œé€šè¿‡åŒé‡åˆ¤æ–­æ¥æ§åˆ¶è¿‡æ¸¡æ•ˆæœçš„å¼€å§‹å’Œç»“æŸï¼Œå¹¶è°ƒç”¨é‡ç½®å‡½æ•°ã€‚æœ€åï¼Œåœ¨æ¯ä¸ªå¸§ä¸Šç»˜åˆ¶é»‘è‰²è¡¨é¢ï¼Œå¹¶ä½¿ç”¨ `BLEND_RGBA_MULT` æ ‡å¿—å åŠ åˆ°å½“å‰è¡¨é¢ä¸Šï¼Œå®ç°é€æ˜åº¦å˜åŒ–çš„è¿‡æ¸¡æ•ˆæœã€‚
### sky
è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªä¸‹é›¨ç‰¹æ•ˆç±» `Rain`ï¼Œé€šè¿‡åœ¨å±å¹•ä¸Šéšæœºåˆ›å»ºé›¨æ»´å’Œåœ°é¢ç»†èŠ‚å…ƒç´ æ¥æ¨¡æ‹Ÿä¸‹é›¨çš„æ•ˆæœã€‚å…¶ä¸­ï¼Œ`Sky` ç±»ç”¨äºç»˜åˆ¶å¤©ç©ºèƒŒæ™¯ï¼Œ`Drop` ç±»ç”¨äºåˆ›å»ºé›¨æ»´å¯¹è±¡ã€‚  
åœ¨ `Rain` ç±»ä¸­ï¼Œé¦–å…ˆè®¾ç½®æ‰€æœ‰ç²¾çµç»„å’Œé›¨æ»´ã€åœ°é¢ç»†èŠ‚å…ƒç´ å­˜å‚¨è·¯å¾„ç­‰å±æ€§ã€‚ç„¶åï¼Œé€šè¿‡ `import_folder()` å‡½æ•°åŠ è½½æ‰€æœ‰é›¨æ»´å’Œåœ°é¢ç»†èŠ‚å…ƒç´ çš„å›¾åƒæ–‡ä»¶ï¼Œå¹¶åˆ›å»ºå¯¹åº”çš„è¡¨é¢å¯¹è±¡ã€‚åœ¨ `create_floor()` å’Œ `create_drops()` æ–¹æ³•ä¸­ï¼Œåˆ†åˆ«æ ¹æ®æŒ‡å®šä½ç½®éšæœºåˆ›å»ºåœ°é¢ç»†èŠ‚å…ƒç´ å’Œé›¨æ»´å¯¹è±¡ï¼Œå¹¶æ·»åŠ åˆ°æ‰€æœ‰ç²¾çµç»„ä¸­ã€‚æœ€åï¼Œåœ¨ `update()` æ–¹æ³•ä¸­ï¼Œå¾ªç¯è°ƒç”¨åˆ›å»ºæ–¹æ³•ï¼Œå®ç°äº†è¿ç»­ä¸‹é›¨çš„æ•ˆæœã€‚`Sky` ç±»ç”¨äºåˆ›å»ºå¤©ç©ºèƒŒæ™¯ï¼Œå…¶ `display()` æ–¹æ³•ä¸­ï¼Œæ ¹æ®æ—¶é—´å·®å€¼è°ƒæ•´å¤©ç©ºé¢œè‰²ï¼Œå¹¶åœ¨å…¨é»‘è¡¨é¢ä¸Šå¡«å……æ¸å˜é¢œè‰²ï¼Œæœ€åä½¿ç”¨ BLEND_RGBA_MULT æ ‡å¿—å°†å…¶è¦†ç›–åˆ°æ˜¾ç¤ºè¡¨é¢ä¸Šï¼Œå®ç°äº†å¤©ç©ºé¢œè‰²é€æ¸æ·±å…¥çš„æ•ˆæœã€‚`Drop` ç±»ç”¨äºåˆ›å»ºé›¨æ»´å¯¹è±¡ï¼Œå…¶ä¸­ `lifetime` å±æ€§è¡¨ç¤ºé›¨æ»´å­˜åœ¨çš„æ—¶é—´ï¼Œ`start_time` å±æ€§è¡¨ç¤ºé›¨æ»´å‡ºç°çš„æ—¶é—´æˆ³ï¼Œ`moving` å±æ€§è¡¨ç¤ºé›¨æ»´æ˜¯å¦æœ‰åŠ¨ç”»æ•ˆæœï¼Œ`pos` å±æ€§ä»¥å‘é‡å½¢å¼å­˜å‚¨é›¨æ»´ä½ç½®ï¼Œ`direction` å’Œ `speed` å±æ€§ç”¨äºæ§åˆ¶é›¨æ»´è¿åŠ¨æ–¹å‘å’Œé€Ÿåº¦ã€‚åœ¨ `update()` æ–¹æ³•ä¸­ï¼Œæ ¹æ®æ—¶é—´å·®å€¼æ›´æ–°é›¨æ»´çš„ä½ç½®ï¼Œå¦‚æœè¶…è¿‡é›¨æ»´å­˜åœ¨æ—¶é—´åˆ™ä»æ‰€æœ‰ç²¾çµç»„ä¸­åˆ é™¤ã€‚  
æ€»ä½“è€Œè¨€ï¼Œè¿™æ®µä»£ç å®ç°äº†ä¸€ä¸ªç®€å•çš„ä¸‹é›¨ç‰¹æ•ˆï¼Œé€šè¿‡åœ¨å±å¹•ä¸Šéšæœºç”Ÿæˆä¸åŒå¤§å°ã€è¿åŠ¨çŠ¶æ€å’Œå¯¿å‘½çš„é›¨æ»´ï¼Œä»¥åŠåœ°é¢ç»†èŠ‚å…ƒç´ ï¼Œé…åˆå¤©ç©ºé¢œè‰²æ¸å˜ï¼Œä½¿å¾—æ¸¸æˆåœºæ™¯æ›´å…·è§†è§‰æ•ˆæœå’ŒçœŸå®æ„Ÿã€‚
### overlay
è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªè¦†ç›–å±‚ç±» `Overlay`ï¼Œç”¨äºåœ¨æ¸¸æˆä¸­æ˜¾ç¤ºç©å®¶å½“å‰é€‰ä¸­çš„é“å…·å’Œç§å­ã€‚é€šè¿‡åŠ è½½å­˜å‚¨åœ¨æŒ‡å®šè·¯å¾„ä¸‹çš„å›¾åƒæ–‡ä»¶ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºè¡¨é¢å¯¹è±¡åï¼Œåœ¨æ¸¸æˆå±å¹•ä¸Šæ˜¾ç¤ºå¯¹åº”é“å…·å’Œç§å­çš„å›¾æ ‡ã€‚  
åœ¨ `Overlay` ç±»ä¸­ï¼Œé¦–å…ˆè®¾ç½®æ˜¾ç¤ºè¡¨é¢å’Œç©å®¶å¯¹è±¡ç­‰å±æ€§ã€‚ç„¶åï¼Œé€šè¿‡ `pygame.image.load()` æ–¹æ³•åŠ è½½å­˜å‚¨åœ¨æŒ‡å®šè·¯å¾„ä¸‹çš„æ‰€æœ‰é“å…·å’Œç§å­å›¾åƒæ–‡ä»¶ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºè¡¨é¢å¯¹è±¡ï¼Œç„¶ååˆ›å»ºåŒ…å«è¿™äº›è¡¨é¢å¯¹è±¡çš„å­—å…¸ã€‚åœ¨ `display()` æ–¹æ³•ä¸­ï¼Œé€šè¿‡è·å–é€‰ä¸­çš„é“å…·å’Œç§å­å¯¹åº”çš„ Surface å¯¹è±¡ï¼Œä»¥åŠè®¡ç®—å…¶åœ¨å±å¹•ä¸Šçš„ä½ç½®ï¼Œç„¶ååœ¨å½“å‰è¡¨é¢å¯¹è±¡ä¸Šç»˜åˆ¶é“å…·å’Œç§å­å›¾æ ‡ï¼Œå®ç°äº†è¦†ç›–å±‚çš„æ˜¾ç¤ºæ•ˆæœã€‚
### level
è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªæ¸¸æˆä¸­çš„å…³å¡ç±»ï¼Œå®ƒåŒ…å«äº†ä¸€ç³»åˆ—çš„æ–¹æ³•å’Œå±æ€§ï¼Œç”¨äºåˆå§‹åŒ–æ¸¸æˆåœºæ™¯ã€æ›´æ–°æ¸¸æˆå¯¹è±¡ã€ç»˜åˆ¶æ¸¸æˆç”»é¢ç­‰ã€‚å…¶ä¸­åŒ…æ‹¬äº†ä»¥ä¸‹ä¸»è¦åŠŸèƒ½ï¼š
åŠ è½½æ¸¸æˆåœ°å›¾æ•°æ®ï¼ŒåŒ…æ‹¬æˆ¿å±‹ã€æ …æ ã€æ°´é¢ã€é‡èŠ±ã€æ ‘æœ¨ã€ç¢°æ’æ£€æµ‹ç½‘æ ¼ç­‰å…ƒç´ ã€‚
åˆ›å»ºç©å®¶è§’è‰²ï¼Œå¹¶å¤„ç†å…¶ä¸æ¸¸æˆåœºæ™¯ä¸­å…¶ä»–å…ƒç´ ä¹‹é—´çš„äº¤äº’é€»è¾‘ï¼Œå¦‚æ”¶é›†æ¤ç‰©ã€è´­ç‰©ç­‰ã€‚
åˆ›å»ºå¹¶ç®¡ç†å„ç§ç±»å‹çš„ç²¾çµç»„ï¼ˆSprite Groupï¼‰ï¼ŒåŒ…æ‹¬æ‰€æœ‰æ¸¸æˆåœºæ™¯ä¸­çš„ç²¾çµã€ç¢°æ’æ£€æµ‹ç²¾çµã€è£…é¥°ç²¾çµã€æ ‘æœ¨ç²¾çµç­‰ã€‚
å¤„ç†å¤©æ°”ç‰¹æ•ˆï¼Œå¦‚ä¸‹é›¨ã€ç™½å¤©é»‘å¤œå˜åŒ–ç­‰ã€‚
å¤„ç†æ¸¸æˆè¿‡æ¸¡æ•ˆæœï¼Œå¹¶æä¾›å•†åº—èœå•ç­‰åŠŸèƒ½ã€‚
### soil ??????
è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªSoilLayerï¼ˆåœŸå£¤å±‚ï¼‰ç±»ï¼Œå®ƒæ˜¯æ¸¸æˆä¸­å†œç”°ç§æ¤ã€æµ‡æ°´ç­‰ç›¸å…³é€»è¾‘çš„å¤„ç†ä¸­å¿ƒã€‚è¯¥ç±»æä¾›è€•åœ°ç“¦ç‰‡å’ŒåœŸå£¤ç“¦ç‰‡çš„åˆ›å»ºã€ç©å®¶é¼ æ ‡ç‚¹å‡»äº‹ä»¶çš„æ£€æµ‹ä»¥åŠå¯è€•ç§åŒºåŸŸçš„æ£€ç´¢ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥è¿›è¡Œæµ‡æ°´æ“ä½œï¼Œåœ¨æŒ‡å®šä½ç½®ä¸Šå‘åœŸå£¤æ·»åŠ æ°´ï¼Œå¹¶åœ¨æµ‡è¿‡æ°´çš„åœŸå£¤ä¸Šåˆ›å»ºç›¸åº”çš„ç²¾çµã€‚å¦å¤–ï¼ŒåœŸå£¤å±‚è¿˜æä¾›ç§æ¤ä½œç‰©çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨æŒ‡å®šä½ç½®çš„åœŸå£¤ä¸Šç§æ¤ç‰¹å®šç±»å‹çš„æ¤ç‰©ï¼Œå¹¶è§¦å‘ç›¸åº”çš„åŠ¨ç”»æ•ˆæœå’ŒéŸ³æ•ˆã€‚æœ€åï¼Œè¯¥ç±»è¿˜å¯ä»¥æ›´æ–°æ‰€æœ‰å·²ç§æ¤ä½œç‰©çš„ç”Ÿé•¿çŠ¶æ€ï¼ŒåŒ…æ‹¬å¹´é¾„ã€æˆç†Ÿåº¦ç­‰ï¼Œå¹¶æä¾›æ£€æµ‹åœŸå£¤æ˜¯å¦è¢«æµ‡æ°´çš„æ–¹æ³•check_watered()ã€‚ä¸æ­¤åŒæ—¶ï¼Œè¯¥ä»£ç è¿˜åˆ›å»ºäº†å¤šä¸ªç²¾çµç»„ï¼Œæ–¹ä¾¿ç®¡ç†å’Œæ¸²æŸ“ä¸åŒç±»å‹çš„å…ƒç´ ã€‚è¯¥ä»£ç é‡‡ç”¨pygameåº“æ¥åŠ è½½å›¾åƒèµ„æºï¼Œå¹¶ä½¿ç”¨TMXæ ¼å¼çš„åœ°å›¾æ•°æ®æ¥åˆå§‹åŒ–æ¸¸æˆåœºæ™¯ä¸­çš„å…ƒç´ ã€‚
### main
è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªGameï¼ˆæ¸¸æˆï¼‰ç±»ï¼Œä½œä¸ºæ•´ä¸ªæ¸¸æˆçš„å…¥å£ç‚¹ï¼Œè´Ÿè´£åˆå§‹åŒ– Pygameã€åˆ›å»ºçª—å£å¯¹è±¡å¹¶è®¾ç½®å°ºå¯¸ã€è®¾ç½®çª—å£æ ‡é¢˜ã€åˆ›å»ºæ—¶é’Ÿå¯¹è±¡ç­‰ã€‚å¦å¤–ï¼Œè¯¥ç±»è¿˜åˆ›å»ºäº†ä¸€ä¸ªLevelï¼ˆå…³å¡ï¼‰å¯¹è±¡ï¼Œç”¨äºå¤„ç†æ¸¸æˆåœºæ™¯ä¸­çš„å…ƒç´ å’Œé€»è¾‘ã€‚åœ¨æ¸¸æˆå¾ªç¯ä¸­ï¼Œè¯¥ç±»ä¼šä¸æ–­æ£€æŸ¥äº‹ä»¶é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰äº‹ä»¶ï¼Œå¦‚æœæ£€æµ‹åˆ°å…³é—­çª—å£äº‹ä»¶ï¼Œåˆ™é€€å‡ºç¨‹åºã€‚åŒæ—¶ï¼Œè¯¥ç±»ä¼šé€šè¿‡è°ƒç”¨å…³å¡å¯¹è±¡çš„run()æ–¹æ³•æ¥æ›´æ–°æ¸¸æˆçŠ¶æ€ï¼Œå¹¶è®¡ç®—å¢é‡æ—¶é—´ã€‚æœ€åï¼Œè¯¥ç±»ä½¿ç”¨pygame.display.update()æ–¹æ³•åˆ·æ–°æ˜¾ç¤ºï¼Œä»è€Œæ›´æ–°æ¸¸æˆç”»é¢ã€‚å¦‚æœå½“å‰æ–‡ä»¶è¢«ç›´æ¥è¿è¡Œï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªæ¸¸æˆå¯¹è±¡å’Œä¸€ä¸ªå…³å¡å¯¹è±¡ï¼Œç„¶åè¿è¡Œæ¸¸æˆå¾ªç¯ã€‚
### sprites
è¿™æ®µä»£ç å®šä¹‰äº†å‡ ä¸ªç±»ï¼ŒåŒ…æ‹¬Genericï¼ˆé€šç”¨ç²¾çµï¼‰ã€Interactionï¼ˆäº¤äº’å…ƒç´ ï¼‰ã€Waterï¼ˆæ°´æ»´ï¼‰ã€WilldFlowerï¼ˆé‡èŠ±ï¼‰ã€Particleï¼ˆç²’å­ç‰¹æ•ˆï¼‰å’ŒTreeï¼ˆæ ‘ï¼‰ã€‚è¿™äº›ç±»éƒ½æ˜¯pygame.sprite.Spriteçš„å­ç±»ï¼Œç”¨äºå¤„ç†æ¸¸æˆä¸­çš„ä¸åŒç±»å‹å…ƒç´ å’Œé€»è¾‘ã€‚å…¶ä¸­ï¼ŒGenericç±»æä¾›çŸ©å½¢èŒƒå›´ã€å›¾åƒè¡¨é¢ã€å›¾å±‚é¡ºåºå’Œç¢°æ’ç®±ç­‰å±æ€§ï¼›Interactionç±»ç»§æ‰¿äº†Genericç±»ï¼Œå¹¶æ·»åŠ äº†å…·ä½“äº¤äº’å…ƒç´ åç§°ï¼›Waterç±»ç»§æ‰¿äº†Genericç±»ï¼Œå¹¶æ·»åŠ äº†åŠ¨ç”»æ•ˆæœå’Œæ›´æ–°æ–¹æ³•ï¼›WilldFlowerç±»ç»§æ‰¿äº†Genericç±»ï¼Œå¹¶é‡æ–°å®šä¹‰äº†ç¢°æ’ç®±å±æ€§ï¼›Particleç±»ç»§æ‰¿äº†Genericç±»ï¼Œå¹¶æ·»åŠ äº†æŒç»­æ—¶é—´å’Œæ¶ˆå¤±æ–¹æ³•ï¼›Treeç±»ç»§æ‰¿äº†Genericç±»ï¼Œå¹¶æ·»åŠ äº†å¥åº·å€¼ã€æ®‹æ ªè¡¨é¢ã€è‹¹æœè¡¨é¢å’Œç©å®¶èµ„æºç­‰å±æ€§ã€‚

åœ¨è¿™äº›ç±»ä¸­ï¼ŒTreeç±»çš„ä½œç”¨æœ€ä¸ºé‡è¦ï¼Œå®ƒé™¤äº†ç»§æ‰¿äº†Genericç±»æä¾›çš„åŸºæœ¬å±æ€§å¤–ï¼Œè¿˜æœ‰è‡ªå·±çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•ã€‚å…¶ä¸­ï¼Œdamage()æ–¹æ³•ç”¨äºå¯¹æ ‘é€ æˆä¼¤å®³ï¼Œé™ä½æ ‘çš„å¥åº·å€¼ï¼Œæ’­æ”¾ç æ ‘éŸ³æ•ˆï¼Œå¹¶ä½¿è‹¹æœæ‰è½ï¼›check_death()æ–¹æ³•ç”¨äºæ£€æŸ¥æ ‘æ˜¯å¦å·²ç»æ­»äº¡ï¼Œå¦‚æœå¥åº·å€¼å°äºç­‰äº0ï¼Œåˆ™ç”Ÿæˆç²’å­ç‰¹æ•ˆã€æ›´æ¢æ®‹æ ªè¡¨é¢ã€æ›´æ–°çŸ©å½¢èŒƒå›´ã€è®¾ç½®æ ‡å¿—å’Œå¢åŠ ç©å®¶èµ„æºã€‚create_fruit()æ–¹æ³•ç”¨äºåœ¨è‹¹æœæ ‘ä¸Šç”Ÿæˆè‹¹æœï¼Œå¹¶æ·»åŠ åˆ°å¯¹åº”çš„ç²¾çµç»„ä¸­ã€‚

è¿™äº›ç±»çš„ä½œç”¨éƒ½æ˜¯ä¸ºäº†å¤„ç†æ¸¸æˆåœºæ™¯ä¸­çš„å…ƒç´ å’Œé€»è¾‘ã€‚åœ¨ä»£ç ä¸­ï¼Œè¿™äº›ç±»è¢«importè¿›æ¥ï¼Œç”¨äºå…¶ä»–æ–‡ä»¶çš„è°ƒç”¨å’Œä½¿ç”¨ã€‚
### player
è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸ºPlayerçš„ç±»ï¼Œè¡¨ç¤ºæ¸¸æˆä¸­çš„ç©å®¶è§’è‰²ã€‚è¿™ä¸ªç±»ç»§æ‰¿äº†pygame.sprite.Spriteç±»ï¼Œå¹¶æ‹¥æœ‰ä¸€ç³»åˆ—å±æ€§å’Œæ–¹æ³•ï¼ŒåŒ…æ‹¬ç©å®¶çš„è´´å›¾ã€ä½ç½®ã€ç¢°æ’æ£€æµ‹ç­‰ã€‚å…¶ä¸­ä¸€äº›æ–¹æ³•ç”¨äºå“åº”ç©å®¶çš„è¾“å…¥æ“ä½œï¼ˆå¦‚ç§»åŠ¨æ–¹å‘ã€ä½¿ç”¨å·¥å…·ç­‰ï¼‰ï¼Œè€Œå¦ä¸€äº›æ–¹æ³•åˆ™ç”¨äºæ›´æ–°ç©å®¶çš„çŠ¶æ€å¹¶æ§åˆ¶åŠ¨ç”»æ•ˆæœçš„æ’­æ”¾ã€‚è¿™ä¸ªç±»è¿˜ä¸å…¶ä»–çš„ç±»å’Œå¯¹è±¡è¿›è¡Œäº†äº¤äº’ï¼Œæ¯”å¦‚å’Œæ ‘æœ¨å¯¹è±¡è¿›è¡Œç¢°æ’æ£€æµ‹ã€å’ŒåœŸåœ°å¯¹è±¡è¿›è¡Œäº¤äº’ç§æ¤ä½œç‰©ã€å’Œå•†äººå¯¹è±¡è¿›è¡Œäº¤äº’æ‰“å¼€å•†åº—ç­‰ã€‚æ•´ä½“æ¥è¯´ï¼Œè¿™ä¸ªç±»æ˜¯å®ç°æ¸¸æˆæ ¸å¿ƒé€»è¾‘çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚
### menu
è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸ºMenuçš„ç±»ï¼Œè¡¨ç¤ºæ¸¸æˆä¸­çš„å•†åº—èœå•ã€‚è¯¥ç±»åŒ…å«äº†è®¸å¤šæ–¹æ³•å’Œå±æ€§ï¼Œç”¨äºå®ç°å•†åº—èœå•çš„å„ç§åŠŸèƒ½ã€‚å…¶ä¸­åŒ…æ‹¬ï¼šæ˜¾ç¤ºç©å®¶å½“å‰çš„é‡‘é’±æ•°ã€å±•ç¤ºåº“å­˜ç‰©å“æ¸…å•ã€å¤„ç†ç”¨æˆ·è¾“å…¥æ“ä½œï¼ˆå¦‚é”®ç›˜ä¸Šä¸‹æ–¹å‘é”®åˆ‡æ¢é€‰é¡¹ã€ç©ºæ ¼é”®è´­ä¹°/å‡ºå”®ç‰©å“ç­‰ï¼‰ã€æ›´æ–°ç•Œé¢çš„çŠ¶æ€ç­‰ã€‚è¿™äº›éƒ½æ˜¯å•†åº—èœå•æ‰€å¿…é¡»çš„æ ¸å¿ƒåŠŸèƒ½ã€‚åœ¨ç±»åˆå§‹åŒ–æ—¶ï¼Œè¿˜éœ€ç»§æ‰¿Playerå’ŒTimerä¸¤ä¸ªç±»ï¼Œå¹¶è®¾ç½®èœå•é€‰é¡¹ï¼ˆå³å•†å“åç§°å’Œæ•°é‡ï¼‰çš„ç›¸å…³å±æ€§å’Œæ–¹æ³•ï¼Œç”¨äºåç»­çš„æ“ä½œã€‚æœ€ç»ˆï¼Œé€šè¿‡è°ƒç”¨æ˜¾ç¤ºé€‰å®šæ¡†ã€å•†å“ä¿¡æ¯å’Œäº¤äº’æŒ‰é’®ç­‰å…ƒç´ ï¼Œå®ç°å•†åº—èœå•çš„æ•´ä½“å‘ˆç°æ•ˆæœã€‚
### setting
è¿™æ®µä»£ç å®šä¹‰äº†ä¸€äº›æ¸¸æˆé…ç½®çš„å¸¸é‡ï¼ŒåŒ…æ‹¬å±å¹•å®½ã€é«˜ã€ç“·ç –å¤§å°ã€å·¥å…·å’Œç§å­é€‰é¡¹å¡çš„ä½ç½®ã€ç©å®¶ä½¿ç”¨å·¥å…·æ—¶çš„åç§»é‡ã€å„ä¸ªå±‚çº§çš„åç§°å’Œé¡ºåºã€è‹¹æœæ ‘ä¸Šè‹¹æœçš„ä½ç½®ã€ä½œç‰©ç”Ÿé•¿é€Ÿåº¦ã€å•†å“å”®ä»·å’Œè´­ä¹°ä»·ç­‰ã€‚è¿™äº›å¸¸é‡çš„ä½œç”¨åœ¨æ•´ä¸ªæ¸¸æˆä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œæ¯”å¦‚å±å¹•å¤§å°å’Œç“·ç –å¤§å°å½±å“ç€æ•´ä¸ªæ¸¸æˆåœºæ™¯çš„å‘ˆç°æ•ˆæœï¼Œä¸åŒå±‚çº§çš„åç§°å’Œé¡ºåºå†³å®šäº†æ¸¸æˆå¯¹è±¡çš„å æ”¾æ¬¡åºï¼Œå•†å“å”®ä»·å’Œè´­ä¹°ä»·å†³å®šäº†å•†åº—èœå•ä¸­çš„äº¤æ˜“é€»è¾‘ç­‰ã€‚é€šè¿‡å°†è¿™äº›å¸¸é‡å®šä¹‰æˆå…¨å±€å˜é‡ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åœ¨æ•´ä¸ªæ¸¸æˆä»£ç ä¸­å¼•ç”¨å’Œä¿®æ”¹ã€‚