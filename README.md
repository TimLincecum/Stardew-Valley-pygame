# æ¯•è®¾
æ¯•è®¾ï¼ˆç¬¬ä¸€æ¬¡ç”¨è¿™ä¸ªæ”¾ï¼Œç©ç©ï¼‰
mdå’‹å†™æ¥ç€ï¼Ÿå¿˜äº†ï¼Œå…ˆéšä¾¿å†™ç‚¹ï¼Œæ¯•ä¸šè®¾è®¡pygameçš„æ¸¸æˆè®¾è®¡ï¼Œå­˜ç€ç©ç©

# å†™ç‚¹è®°å½•
## 3.15 
ç¢°æ’çš„è¡¥å…¨ï¼Œä»Šå¤©æ˜¯è§†é¢‘P11 ç¢°æ’çš„å†…å®¹  
é¦–å…ˆæ”¹é”™ï¼Œä¸Šæ¬¡çš„å‘ç”Ÿç¢°æ’åç²¾çµå‘åé€€çš„åŸå› æ˜¯spriteé”™å†™æˆäº†selfï¼Œè‡³äºä¸ºä»€ä¹ˆæ²¡ææ‡‚ï¼Œå¯ä»¥æ•´ç†åå½“ä½œæ¯•ä¸šç­”è¾©çš„è®ºè¿°ï¼Œéœ€è¦å†™è¿›è®ºæ–‡  
ç„¶åä¸Šä¸‹çš„ç¢°æ’æœªå®ç°æ˜¯ä»¥ä¸ºæˆ‘æ²¡æœ‰å†™ï¼Œæ‰€ä»¥å½“æ—¶çœ‹è®ºæ–‡æ‰ä¼šåªæœ‰leftå’Œrightï¼Œè¿™å¹¶ä¸æ˜¯å·¦å³ä»£æ›¿äº†ä¸Šä¸‹è¿›è¡Œç¢°æ’åˆ¤æ–­ï¼Œå¾€åè¿˜éœ€ä»”ç»†é˜…è¯»ä»£ç ï¼ˆèœå°±æ˜¯èœï¼Œxibaï¼‰  
è¡¥é½äº†ä¸Šä¸‹çš„ç¢°æ’åˆ¤æ–­åæœ‰ä¸€å¥ `self.collision('horizontal')` éœ€è¦ææ‡‚ä¸ºä»€ä¹ˆï¼Œæœ‰æ€è·¯åè¡¥å…¨  
ç¬¬ä¸‰æ˜¯ä¿®æ”¹äº†ç²¾çµçš„åˆå§‹ä½ç½®ï¼Œåœ¨levelä¸­çš„setupçš„playerä¸­ï¼Œç›´æ¥è°ƒç”¨tmxä¸­è®¾ç½®å¥½çš„åˆå§‹ä½ç½®  
æœ€åæ˜¯è®¾ç½®äº†è¾¹ç•Œå’Œé«˜å¡ï¼Œåœ°å›¾ä¸­æœ‰ä¸€ä¸ªCollisionï¼Œåé¢æœ‰ä¸€æ®µæ”¹å®Œåä¼šç›´æ¥å°†è¾¹ç•Œæ˜¾ç¤ºï¼Œé‚£ä¸€æ®µä¸ºä»€ä¹ˆéœ€è¦ææ¸…æ¥š  
å°±è¿™ä¹ˆå¤š  
#### æ¢è¡Œæ˜¯ç©ºæ ¼ï¼Œmdçš„æ ¼å¼ç¬¦åè¦ç©ºæ ¼

## 3.17 3.18 P12
è‹¹æœçš„åˆ›å»ºå’Œé‡‡æ‘˜ï¼Œæ ‘æœ¨ç ä¼çš„åˆ¤å®šï¼Œå·¥å…·ä½¿ç”¨çš„åˆ¤å®š ä»Šå¤©æ˜¯è§†é¢‘P12çš„å†…å®¹
åˆ›é€ è‹¹æœå¼€å§‹ï¼Œå…ˆå¯¼å…¥ï¼Œsettingsä¸­æœ‰`APPLE_POS`å¯ä»¥ç¡®å®šè‹¹æœçš„ç”Ÿæˆä½ç½®,  
å»ºç«‹æœå®çš„ä½ç½®ï¼Œå…ˆå®Œæˆä¸€ä¸ªforå¾ªç¯ï¼Œå»ºç«‹ä¸€ä¸ªéšæœºæ•°,è¿›è¡Œè‹¹æœçš„éšæœºç”Ÿæˆ,è°ƒç”¨classç±»çš„Generic,æœ‰å››ä¸ªå˜é‡,pos\surf\groupè¿˜æœ‰ä¸€ä¸ªzï¼Œsurfå¾ˆç®€å•ï¼Œå°±æ˜¯`surf = self.apple_surf`ç›´æ¥èµ‹å€¼,  
è€Œgroupæ˜¯ï¼Ÿ`groups=[self.apple_sprites,self.groups()[0]]`,  
zç›´æ¥å¼•ç”¨è´´å›¾çš„è®¾ç½®`z = LAYERS['fruit']`ï¼Œposæ˜¯ä¸¤ä¸ªå€¼xå’Œyï¼Œ`x = pos[0] + self.rect.left`æ„æ€å°±æ˜¯ä»çª—å£æœ€å·¦è¾¹åˆ°æ ‘çš„è·ç¦»ï¼ŒyåŒç†ã€‚æœ€åè°ƒç”¨create_frultå°±ä¼šç”Ÿæˆè‹¹æœ  
æ ‘çš„å±æ€§(tree attributes)ï¼Œå…ˆç»™ä¸€ä¸ªå¥åº·å€¼healthï¼Œå†ç»™ä¸€ä¸ªaliveï¼Œå¯¹æ ‘æ´»ç€çš„åˆ¤æ–­å¹¶èµ‹å€¼ä¸ºtrueï¼Œå› ä¸ºæ ‘çš„ç²—ç»†çš„ä¸åŒçš„æ‰€ä»¥è°ƒç”¨æ—¶åº”è¯¥åšä¸€ä¸ªåˆ¤æ–­`f'../graphics/stumps/{"small" if name == "Small" else "large"}.png'`ç„¶ååœ¨è½¬æ¢ï¼Œè½¬æ¢ï¼Ÿï¼Ÿï¼Ÿ  
è¿˜éœ€è¦ä¸€ä¸ª`invul_timer`ï¼Ÿï¼Ÿï¼Ÿ  
å¦ä¸€ä¸ªæ–¹æ³•damageï¼Œå¥åº·å€¼-1ï¼Œè¿˜è¦ç§»é™¤ä¸€ä¸ªè‹¹æœï¼Œå¦‚æœæ•°é‡ä¸º0åˆ™æ²¡æœ‰æ„ä¹‰ï¼Œæ‰€ä»¥å…ˆåšä¸€ä¸ªåˆ¤æ–­è‹¹æœçš„æ•°é‡æ˜¯å¤§äºé›¶çš„ï¼Œ`random_apple = choice(self.apple_sprites.sprites()) random_apple.kill()`ï¼Ÿï¼Ÿï¼Ÿè§£æƒ‘  
è¿™ä¸ªæ–¹æ³•å°†ä¼šå‘ç”Ÿåœ¨levelä¸­ï¼Œè°ƒç”¨æ–¹æ³•å…ˆï¼Œåœ¨setupä¸­çš„  
`for obj in tmx_data.get_layer_by_name('Trees') :
    Tree((obj.x,obj.y),obj.image,[self.all_sprites,self.collision_sprites,self.tree_sprites],obj.name)` è¦ä¿è¯self.all_spritesä¸ºç¬¬ä¸€é¡¹ï¼Œå¦åˆ™`groups=[self.apple_sprites,self.groups()[0]],`ä¼šæ— æ³•è¿è¡Œã€‚ç„¶ååœ¨#playerä¸­å‡å¦‚å‚æ•°`trees = self.tree_sprites`,ç„¶åå†playerçš„_init_æ–¹æ³•ä¸­åŠ å…¥é»˜è®¤å‚æ•°tree_sprites,ç„¶ååœ¨å°¾éƒ¨åŠ å…¥#interaction`self.tree_sprites = tree_sprites`ï¼Œç„¶åå†use_toolsæˆ‘ä»¬åŠ å…¥åˆ¤æ–­ä¸‰ç§å·¥å…·çš„ä½¿ç”¨ï¼Œå› ä¸ºæ˜¯ç ä¼ï¼Œæ‰€ä»¥æš‚æ—¶åªåšæ–§å¤´axeçš„ï¼Œä¸ºæ­¤å…ˆå‡†å¤‡å®šä½ï¼Œå®šä¹‰æ–¹æ³•`def get_target_pos(self)`settingsä¸­æœ‰å·¥å…·çš„å®šä½ï¼Œç›´æ¥è°ƒç”¨å³å¯ï¼Œè®°å¾—æ›´æ–°
ï¼Œç»§ç»­åˆ¤æ–­å·¥å…·çš„ä½¿ç”¨ 
`if self.selected_tool == 'axe' :
     for tree in self.tree_sprites.sprites() :
        if tree.rect.collidepoint(self.target_pos) :
            tree.damge()`
æœ€åå¾—åˆ°æ ‘æœ¨å¥åº·-1çš„æ–¹æ³•è°ƒç”¨ï¼Œç»“æŸè¿™ä¸€æ®µï¼Œä½†åˆ°æ­¤ç»“æŸçš„è¯ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œæœªä½¿ç”¨å·¥å…·ä¹Ÿä¼šå¯¼è‡´è‹¹æœçš„æ”¶é›†ï¼Œæ‰€ä»¥å†timerä¸­updateå‡½æ•°éœ€è¦ä¿®æ”¹ 
```
def update(self) :
    current_time = pygame.time.get_ticks()
    if current_time - self.start_time >= self.duration :
        # self.deactivate() å¦‚æœåœ¨è¿™é‡Œï¼Œæ¯æ¬¡è¿è¡Œåéƒ½ä¼šå½’é›¶ï¼Œä¸‹é¢çš„åˆ¤æ–­ä¸ä¼šç”Ÿæ•ˆ
        if self.func and self.start_time != 0 :
            self.func()  
        self.deactivate()   # å¼€å§‹åˆ¤æ–­
```
è¿™é‡Œå…ˆè§£é‡Šç¬¬äºŒä¸ªifåˆ¤æ–­è¯­å¥ï¼Œ`and self.start_time != 0`ï¼Ÿï¼Ÿï¼Ÿ  
ç„¶åä¸€å¼€å§‹deactivateæ˜¯å†ç¬¬äºŒä¸ªifè¯­å¥ä¸Šæ–¹çš„ã€‚ã€‚ã€‚ã€‚ï¼ˆğŸ‘†åŸå› æœ‰å†™ï¼‰æ›´æ”¹åï¼Œç¨‹åºæ­£å¸¸ï¼Œå¼€å§‹å¢åŠ ç æ ‘çš„éƒ¨åˆ†ï¼Œå®šä¹‰å‡½æ•°check_death,åˆ¤æ–­å¼•ç”¨ï¼Œå½“_init_å‡½æ•°ä¸­çš„healthç»è¿‡damgeå‡½æ•°çš„è°ƒç”¨å¯¼è‡´health<=0æ—¶ï¼Œæ ‘æœ¨æ­»äº¡æ¡ä»¶æˆç«‹ï¼Œè®°å¾—è°ƒç”¨æ›´æ–°ï¼Œaliveåˆ¤æ–­æœªfalseï¼Œï¼Ÿï¼Ÿï¼Ÿ
'''
def check_death(self) :
    if self.health <= 0 :
        # print('dead')
        self.image = self.stump_surf
        self.rect = self.image.get_rect(midbottom = self.rect.midbottom)
        self.hitbox = self.rect.copy().inflate(-10,-self.rect.height * 0.6) # w,h
        self.alive = False
'''  
ï¼Ÿï¼Ÿï¼Ÿä»£è¡¨æ²¡å†™å®Œæˆ–è€…æœ‰ç–‘é—®ï¼Œåç»­è®ºæ–‡è¡¥å……ï¼Œåå…«å·ä»»åŠ¡å®Œæˆï¼Œmdçš„ä»£ç å—å’Œæ’å…¥å›¾ç‰‡éœ€è¦å­¦ä¹ ä¸€ä¸‹ï¼Œgiao
