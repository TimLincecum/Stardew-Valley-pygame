# æ¯•è®¾
æ¯•è®¾ï¼ˆç¬¬ä¸€æ¬¡ç”¨è¿™ä¸ªæ”¾ï¼Œç©ç©ï¼‰
mdå’‹å†™æ¥ç€ï¼Ÿå¿˜äº†ï¼Œå…ˆéšä¾¿å†™ç‚¹ï¼Œæ¯•ä¸šè®¾è®¡pygameçš„æ¸¸æˆè®¾è®¡ï¼Œå­˜ç€ç©ç©

# äº®ç‚¹åˆ†æ

1. æ¸¸æˆé£æ ¼ï¼šè¿™ä¸ªæ¸¸æˆé‡‡ç”¨äº†åƒç´ åŒ–çš„é£æ ¼ï¼Œå¹¶å¸¦æœ‰å¾ˆå¤šéœ“è™¹ç¯æ•ˆæœå’ŒåŠ¨ç”»ã€‚è¿™ç§è®¾è®¡é£æ ¼éå¸¸æµè¡Œï¼Œå¯ä»¥ä½¿æ¸¸æˆçœ‹èµ·æ¥éå¸¸é…·ã€‚

2. å¯¹è±¡ç»„ç»‡ï¼šåœ¨æ¸¸æˆä¸­ï¼Œæœ‰å¾ˆå¤šä¸åŒç±»å‹çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ç©å®¶ã€æ ‘ã€è‹¹æœï¼‰ï¼Œå¹¶ä¸”å®ƒä»¬éƒ½éœ€è¦ä»¥æŸç§æ–¹å¼ç»„ç»‡èµ·æ¥ã€‚ä½œè€…ä½¿ç”¨äº† Pygame çš„ç²¾çµç»„ç»‡åŠŸèƒ½ï¼Œè¿™æ ·å¯ä»¥å¾ˆå®¹æ˜“åœ°å°†æ‰€æœ‰ç›¸å…³å¯¹è±¡åˆ†ä¸ºä¸€ç»„ï¼Œå¹¶åœ¨æ›´æ–°æ—¶ä¸€èµ·å¤„ç†ã€‚

3. ç¢°æ’æ£€æµ‹ï¼šå½“æ¸¸æˆä¸­çš„ä¸¤ä¸ªå¯¹è±¡ç›¸äº’ä½œç”¨æ—¶ï¼Œé€šå¸¸éœ€è¦æ£€æµ‹å®ƒä»¬æ˜¯å¦å‘ç”Ÿäº†ç¢°æ’ã€‚Pygame æä¾›äº†æ–¹ä¾¿çš„ç¢°æ’æ£€æµ‹ APIï¼Œä½¿å¾—ç¼–å†™ç¢°æ’ä»£ç å˜å¾—å¾ˆå®¹æ˜“ã€‚

4. åŠ¨ç”»ï¼šåœ¨æ¸¸æˆä¸­ï¼Œæœ‰å¾ˆå¤šå¯¹è±¡éƒ½éœ€è¦åŠ¨ç”»æ•ˆæœï¼Œæ¯”å¦‚æ°´çš„æ³¢åŠ¨ã€æ ‘çš„æ‘‡æ™ƒç­‰ç­‰ã€‚ä½œè€…ä½¿ç”¨äº† Pygame çš„ Surface ç±»æ¥åˆ›å»ºå¸§ï¼Œå¹¶ä½¿ç”¨å®šæ—¶å™¨è°ƒæ•´æ¯ä¸€å¸§ä¹‹é—´çš„æ—¶é—´å·®ï¼Œä»è€Œåˆ¶é€ å‡ºæµç•…çš„åŠ¨ç”»æ•ˆæœã€‚

5. ç²’å­ç‰¹æ•ˆï¼šåœ¨æ¸¸æˆä¸­ï¼Œæœ‰å¾ˆå¤šéœ€è¦ç‰¹æ®Šæ•ˆæœçš„åœºæ™¯ï¼Œæ¯”å¦‚æ ‘è¢«ç å€’æ—¶ï¼Œéœ€è¦é£æº…å‡ºæœ¨å±‘å’Œæ ‘æã€‚ä½œè€…ä½¿ç”¨ Pygame çš„è’™ç‰ˆè¡¨é¢å’Œç²¾çµç»„ç»‡åŠŸèƒ½åˆ›å»ºäº†ä¸€äº›ç®€å•çš„ç²’å­ç‰¹æ•ˆï¼Œè¿™ä½¿å¾—æ¸¸æˆçœ‹èµ·æ¥æ›´åŠ çœŸå®ã€‚


# å†™ç‚¹è®°å½•
## 3.15 
ç¢°æ’çš„è¡¥å…¨ï¼Œä»Šå¤©æ˜¯è§†é¢‘P11 ç¢°æ’çš„å†…å®¹  
é¦–å…ˆæ”¹é”™ï¼Œä¸Šæ¬¡çš„å‘ç”Ÿç¢°æ’åç²¾çµå‘åé€€çš„åŸå› æ˜¯spriteé”™å†™æˆäº†selfï¼Œè‡³äºä¸ºä»€ä¹ˆæ²¡ææ‡‚ï¼Œå¯ä»¥æ•´ç†åå½“ä½œæ¯•ä¸šç­”è¾©çš„è®ºè¿°ï¼Œéœ€è¦å†™è¿›è®ºæ–‡  
ç„¶åä¸Šä¸‹çš„ç¢°æ’æœªå®ç°æ˜¯ä»¥ä¸ºæˆ‘æ²¡æœ‰å†™ï¼Œæ‰€ä»¥å½“æ—¶çœ‹è®ºæ–‡æ‰ä¼šåªæœ‰leftå’Œrightï¼Œè¿™å¹¶ä¸æ˜¯å·¦å³ä»£æ›¿äº†ä¸Šä¸‹è¿›è¡Œç¢°æ’åˆ¤æ–­ï¼Œå¾€åè¿˜éœ€ä»”ç»†é˜…è¯»ä»£ç ï¼ˆèœå°±æ˜¯èœï¼Œxibaï¼‰  
è¡¥é½äº†ä¸Šä¸‹çš„ç¢°æ’åˆ¤æ–­åæœ‰ä¸€å¥ `self.collision('horizontal')` éœ€è¦ææ‡‚ä¸ºä»€ä¹ˆï¼Œæœ‰æ€è·¯åè¡¥å…¨  
ç¬¬ä¸‰æ˜¯ä¿®æ”¹äº†ç²¾çµçš„åˆå§‹ä½ç½®ï¼Œåœ¨levelä¸­çš„setupçš„playerä¸­ï¼Œç›´æ¥è°ƒç”¨tmxä¸­è®¾ç½®å¥½çš„åˆå§‹ä½ç½®  
æœ€åæ˜¯è®¾ç½®äº†è¾¹ç•Œå’Œé«˜å¡ï¼Œåœ°å›¾ä¸­æœ‰ä¸€ä¸ªCollisionï¼Œåé¢æœ‰ä¸€æ®µæ”¹å®Œåä¼šç›´æ¥å°†è¾¹ç•Œæ˜¾ç¤ºï¼Œé‚£ä¸€æ®µä¸ºä»€ä¹ˆéœ€è¦ææ¸…æ¥š  
å°±è¿™ä¹ˆå¤š  
#### æ¢è¡Œæ˜¯ç©ºæ ¼ï¼Œmdçš„æ ¼å¼ç¬¦åè¦ç©ºæ ¼

## 3.17 3.18 P12
è‹¹æœçš„åˆ›å»ºå’Œé‡‡æ‘˜ï¼Œæ ‘æœ¨ç ä¼çš„åˆ¤å®šï¼Œå·¥å…·ä½¿ç”¨çš„åˆ¤å®š ä»Šå¤©æ˜¯è§†é¢‘P12çš„å†…å®¹
åˆ›é€ è‹¹æœå¼€å§‹ï¼Œå…ˆå¯¼å…¥ï¼Œsettingsä¸­æœ‰`APPLE_POS`å¯ä»¥ç¡®å®šè‹¹æœçš„ç”Ÿæˆä½ç½®,  
å»ºç«‹æœå®çš„ä½ç½®ï¼Œå…ˆå®Œæˆä¸€ä¸ªforå¾ªç¯ï¼Œå»ºç«‹ä¸€ä¸ªéšæœºæ•°,è¿›è¡Œè‹¹æœçš„éšæœºç”Ÿæˆ,è°ƒç”¨classç±»çš„Generic,æœ‰å››ä¸ªå˜é‡,pos\surf\groupè¿˜æœ‰ä¸€ä¸ªzï¼Œsurfå¾ˆç®€å•ï¼Œå°±æ˜¯`surf = self.apple_surf`ç›´æ¥èµ‹å€¼,  
è€Œgroupæ˜¯ï¼Ÿ`groups=[self.apple_sprites,self.groups()[0]]`,  
zç›´æ¥å¼•ç”¨è´´å›¾çš„è®¾ç½®`z = LAYERS['fruit']`ï¼Œposæ˜¯ä¸¤ä¸ªå€¼xå’Œyï¼Œ`x = pos[0] + self.rect.left`æ„æ€å°±æ˜¯ä»çª—å£æœ€å·¦è¾¹åˆ°æ ‘çš„è·ç¦»ï¼ŒyåŒç†ã€‚æœ€åè°ƒç”¨create_frultå°±ä¼šç”Ÿæˆè‹¹æœ  
æ ‘çš„å±æ€§(tree attributes)ï¼Œå…ˆç»™ä¸€ä¸ªå¥åº·å€¼healthï¼Œå†ç»™ä¸€ä¸ªaliveï¼Œå¯¹æ ‘æ´»ç€çš„åˆ¤æ–­å¹¶èµ‹å€¼ä¸ºtrueï¼Œå› ä¸ºæ ‘çš„ç²—ç»†çš„ä¸åŒçš„æ‰€ä»¥è°ƒç”¨æ—¶åº”è¯¥åšä¸€ä¸ªåˆ¤æ–­`f'../graphics/stumps/{"small" if name == "Small" else "large"}.png'`ç„¶ååœ¨è½¬æ¢ï¼Œè½¬æ¢ï¼Ÿï¼Ÿï¼Ÿ  
è¿˜éœ€è¦ä¸€ä¸ª`invul_timer`ï¼Ÿï¼Ÿï¼Ÿ  
å¦ä¸€ä¸ªæ–¹æ³•damageï¼Œå¥åº·å€¼-1ï¼Œè¿˜è¦ç§»é™¤ä¸€ä¸ªè‹¹æœï¼Œå¦‚æœæ•°é‡ä¸º0åˆ™æ²¡æœ‰æ„ä¹‰ï¼Œæ‰€ä»¥å…ˆåšä¸€ä¸ªåˆ¤æ–­è‹¹æœçš„æ•°é‡æ˜¯å¤§äºé›¶çš„ï¼Œ`random_apple = choice(self.apple_sprites.sprites()) random_apple.kill()`ï¼Ÿï¼Ÿï¼Ÿè§£æƒ‘  
è¿™ä¸ªæ–¹æ³•å°†ä¼šå‘ç”Ÿåœ¨levelä¸­ï¼Œè°ƒç”¨æ–¹æ³•å…ˆï¼Œåœ¨setupä¸­çš„  
`for obj in tmx_data.get_layer_by_name('Trees') :
    Tree((obj.x,obj.y),obj.image,[self.all_sprites,self.collision_sprites,self.tree_sprites],obj.name)` è¦ä¿è¯self.all_spritesä¸ºç¬¬ä¸€é¡¹ï¼Œå¦åˆ™`groups=[self.apple_sprites,self.groups()[0]],`ä¼šæ— æ³•è¿è¡Œã€‚ç„¶ååœ¨#playerä¸­å‡å¦‚å‚æ•°`trees = self.tree_sprites`,ç„¶åå†playerçš„_init_æ–¹æ³•ä¸­åŠ å…¥é»˜è®¤å‚æ•°tree_sprites,ç„¶ååœ¨å°¾éƒ¨åŠ å…¥#interaction`self.tree_sprites = tree_sprites`ï¼Œç„¶åå†use_toolsæˆ‘ä»¬åŠ å…¥åˆ¤æ–­ä¸‰ç§å·¥å…·çš„ä½¿ç”¨ï¼Œå› ä¸ºæ˜¯ç ä¼ï¼Œæ‰€ä»¥æš‚æ—¶åªåšæ–§å¤´axeçš„ï¼Œä¸ºæ­¤å…ˆå‡†å¤‡å®šä½ï¼Œå®šä¹‰æ–¹æ³•`def get_target_pos(self)`settingsä¸­æœ‰å·¥å…·çš„å®šä½ï¼Œç›´æ¥è°ƒç”¨å³å¯ï¼Œè®°å¾—æ›´æ–°
ï¼Œç»§ç»­åˆ¤æ–­å·¥å…·çš„ä½¿ç”¨ 
`if self.selected_tool == 'axe' :
     for tree in self.tree_sprites.sprites() :
        if tree.rect.collidepoint(self.target_pos) :
            tree.damge()`
æœ€åå¾—åˆ°æ ‘æœ¨å¥åº·-1çš„æ–¹æ³•è°ƒç”¨ï¼Œç»“æŸè¿™ä¸€æ®µï¼Œä½†åˆ°æ­¤ç»“æŸçš„è¯ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œæœªä½¿ç”¨å·¥å…·ä¹Ÿä¼šå¯¼è‡´è‹¹æœçš„æ”¶é›†ï¼Œæ‰€ä»¥å†timerä¸­updateå‡½æ•°éœ€è¦ä¿®æ”¹ 
```
def update(self) :
    current_time = pygame.time.get_ticks()
    if current_time - self.start_time >= self.duration :
        # self.deactivate() å¦‚æœåœ¨è¿™é‡Œï¼Œæ¯æ¬¡è¿è¡Œåéƒ½ä¼šå½’é›¶ï¼Œä¸‹é¢çš„åˆ¤æ–­ä¸ä¼šç”Ÿæ•ˆ
        if self.func and self.start_time != 0 :
            self.func()  
        self.deactivate()   # å¼€å§‹åˆ¤æ–­
```
è¿™é‡Œå…ˆè§£é‡Šç¬¬äºŒä¸ªifåˆ¤æ–­è¯­å¥ï¼Œ`and self.start_time != 0`ï¼Ÿï¼Ÿï¼Ÿ  
ç„¶åä¸€å¼€å§‹deactivateæ˜¯å†ç¬¬äºŒä¸ªifè¯­å¥ä¸Šæ–¹çš„ã€‚ã€‚ã€‚ã€‚ï¼ˆğŸ‘†åŸå› æœ‰å†™ï¼‰æ›´æ”¹åï¼Œç¨‹åºæ­£å¸¸ï¼Œå¼€å§‹å¢åŠ ç æ ‘çš„éƒ¨åˆ†ï¼Œå®šä¹‰å‡½æ•°check_death,åˆ¤æ–­å¼•ç”¨ï¼Œå½“_init_å‡½æ•°ä¸­çš„healthç»è¿‡damgeå‡½æ•°çš„è°ƒç”¨å¯¼è‡´health<=0æ—¶ï¼Œæ ‘æœ¨æ­»äº¡æ¡ä»¶æˆç«‹ï¼Œè®°å¾—è°ƒç”¨æ›´æ–°ï¼Œaliveåˆ¤æ–­æœªfalseï¼Œï¼Ÿï¼Ÿï¼Ÿ
'''
def check_death(self) :
    if self.health <= 0 :
        # print('dead')
        self.image = self.stump_surf
        self.rect = self.image.get_rect(midbottom = self.rect.midbottom)
        self.hitbox = self.rect.copy().inflate(-10,-self.rect.height * 0.6) # w,h
        self.alive = False
'''  
ï¼Ÿï¼Ÿï¼Ÿä»£è¡¨æ²¡å†™å®Œæˆ–è€…æœ‰ç–‘é—®ï¼Œåç»­è®ºæ–‡è¡¥å……ï¼Œåå…«å·ä»»åŠ¡å®Œæˆï¼Œmdçš„ä»£ç å—å’Œæ’å…¥å›¾ç‰‡éœ€è¦å­¦ä¹ ä¸€ä¸‹ï¼Œgiao

## 3.25 P13
è‹¹æœæ ‘æ¶ˆå¤±çš„ç²’å­ç‰¹æ•ˆ,æ•´ä½“å¯å†™çš„ä¸å¤š,åªè¦æŠŠå‚æ•°å…¨éƒ¨ææ˜ç™½å†™ä¸Šå°±è¡Œï¼Œè¿™é‡Œä¸è¿‡å¤šèµ˜è¿°ï¼Œé©¬ä¸Šä¸Šè¯¾äº†

## 3.27 P14
ç©å®¶åº“å­˜
å»ºç«‹å­—å…¸è¿›è¡Œç‰©å“çš„å­˜å‚¨ `self.item_inventory` ,éœ€è¦é“¾æ¥playerå’Œspritesä¸­çš„Treeç±»,å¿…é¡»åœ¨levelä¸­å®Œæˆé“¾æ¥,
åœ¨levelä¸­æ·»åŠ player_addç±»,è·å– `self.player.item_inventory[item]` æ•°å€¼æ˜¯+= 1,ä¼šæ›´åŠ æ–¹ä¾¿äº›,è¿™æ„å‘³ç€åœ¨setupä¸­éœ€è¦
æ›´æ–°åˆ›å»ºtree,æ·»åŠ çš„ `player_add = self.player_add` å¹¶ä¸”ç¡®ä¿åªåœ¨å†…éƒ¨è°ƒç”¨,åœ¨spritesä¸­çš„treeç±»ä¸­çš„__init__æ·»åŠ 
player_addå‚æ•°ï¼Œå¹¶åœ¨å†…éƒ¨è°ƒç”¨,å½“æ ‘è¢«ç ´åæ—¶ï¼Œå°†ä¼š `self.player_add('apple')` è¿™å°†å®Œæˆè‹¹æœå­˜å‚¨çš„æ“ä½œï¼Œæ ‘çš„æ“ä½œåŒç†
åœ¨ `def check_death(self)` ä¸­è°ƒç”¨ `self.player_add('wood')` ,åœ¨æ ‘æœ¨æ”¶é›†å®Œæˆã€‚

## 3.28 p15
æ–°çš„ä¸€å¤©å¼€å§‹  
ä½¿ç”¨ç”¨tiledä¸­playerå›¾å±‚ä¸­çš„Bedé€‰é¡¹,å°†è¿™ä¸€å—åŒºåŸŸè®¾ç½®ä¸ºâ€œç¡è§‰â€çš„åˆ¤å®šåŒºåŸŸï¼Œå½“ç©å®¶æ§åˆ¶spritesç§»åŠ¨åˆ°è¯¥åŒºåŸŸå¹¶ä¸”æŒ‰å›è½¦æ—¶ï¼Œåˆ¤å®š
ç©å®¶å°†æ‰§è¡Œç¡è§‰å¹¶è¿›å…¥æ–°çš„ä¸€å¤©çš„æ“ä½œ,åœ¨spritesä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»ä¸ºinstruction,ç±»çš„å±æ€§ç»§æ‰¿Generic,åˆå§‹åŒ–å¯¹è±¡çš„å±æ€§ä¸­æœ‰pos, size, groups, name
è¿™é‡Œä¸éœ€è¦surfaceï¼Œå› ä¸ºæ— è®ºå¦‚ä½•ï¼Œè¿™ç§spritesæ°¸ä¸å¯è§, `surf = pygame.Surface(size)` ,ç°åœ¨è¦ç»§æ‰¿å¤šä¸ªçˆ¶ç±»æ–¹æ³•æ‰€ä»¥è°ƒç”¨
superæ–¹æ³• `super().__init__(pos, surf, groups)` ï¼Œç°åœ¨åœ¨levelä¸­çš„æ’­æ”¾å™¨è®¾ç½®ï¼Œåˆ¤æ–­ç©å®¶æ˜¯å¦æ˜¯åœ¨'Bed'åŒºåŸŸä¸­ï¼Œå¯¼å…¥spritesä¸­çš„Interactionå¹¶ä¸”èµ‹å‚æ•°,  
`
if obj.name == 'Bed' :  
    Interaction(pos = (obj.x,obj.y),  
                size = (obj.width,obj.height),  
                groups = self.interaction_sprites,  
                name = 'Bed' # obj.name  
                )
`
nameç”¨'Bed'æˆ–è€…obj.nameéƒ½å¯ä»¥ï¼Œç°åœ¨å°† `interaction = self.interaction_sprites` åŠ å…¥å¾ªç¯ä¸­çš„åˆ¤å®šï¼Œå¹¶åœ¨playerçš„å†…éƒ¨
åŠ å…¥å‚æ•°interactionï¼Œç°åœ¨å°±æ£€æŸ¥ç©å®¶æ˜¯å¦åœ¨åˆ¤å®šçš„åŒºåŸŸå†…å¹¶æŒ‰ä¸‹äº†å›è½¦ï¼Œç°åœ¨åˆ¤æ–­è¾“å…¥å›è½¦æ—¶ï¼Œç©å®¶æ˜¯å¦Bed spriteç›¸é‡å 
`collided_interaction_sprites = pygame.sprite.spritecollide(self,self.interaction,False)` 
ä¸‰ä¸ªå€¼åˆ†åˆ«æ˜¯sprite, group, dokillï¼Œç¡®å®šç©å®¶çš„çŠ¶æ€åï¼Œå¼€å§‹é‡å¯å…³å¡çš„å·¥ä½œï¼Œé‡å¯å…³å¡æ„å‘³ç€æ‰€æœ‰æ ‘ä¼šå¾—åˆ°æ–°çš„è‹¹æœï¼Œå¦‚æœè¿˜æ´»ç€çš„æ ‘
éœ€è¦é‡ç½®æ•´ä¸ªlevelï¼Œtreeè°ƒç”¨å®Œæˆçš„å‡½æ•°create_fruitï¼Œå†ä½¿ç”¨forå¾ªç¯è¿›è¡Œæ¶ˆé™¤ç°æœ‰çš„è‹¹æœçš„æ“ä½œï¼Œè¿™åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªé‡ç½®ï¼Œç°åœ¨éœ€è¦
ç©å®¶é‡ç½®å’Œç”»é¢è¿‡æ¸¡ä¸€èµ·è¿è¡Œï¼Œç°åœ¨playerä¸­å®šä¹‰sleepçš„çŠ¶æ€ä¸ºFalseï¼Œå¦‚æœç©å®¶æŒ‰ä¸‹å›è½¦ï¼Œè®¾ç½®ä¸ºTrueï¼Œç©å®¶æ˜¯å¦è¿›è¡Œsleepæ“ä½œçš„åˆ¤æ–­
å°±è¿™æ ·ï¼Œç°åœ¨å¼€å§‹è¿‡æ¸¡ï¼Œåˆ›å»ºè¿‡æ¸¡ç”¨çš„ç±»transitionï¼Œå®šä¹‰å¸¸ç”¨çš„setupè®¾ç½®ï¼Œåˆ›å»ºè¦†ç›–å±‚ï¼Œè®¾ç½®å®½åº¦å’Œé«˜åº¦ï¼Œå³çª—å£çš„å¤§å°è·å–ï¼Œcolorä¸º255
è®¾ç½®å›¾åƒå¡«å……ï¼Œå¯¼å…¥åˆ°levelä¸­ï¼Œç°åœ¨å›¾åƒä¼šä»å…¨ç™½å¿«é€Ÿåˆ°é»‘è‰²ï¼Œè¿™æ˜¯æ­£ç¡®çš„ï¼Œæ¯ä¸€å¸§çš„é¢œè‰²éƒ½æ˜¯å˜å¾—è¶Šæ¥è¶Šæš—ï¼ŒåŠ å…¥å‚æ•° `special_flags = pygame.BLEND_RGBA_MULT`
ä¼šä½¿å˜åŒ–æ›´å¥½çš„è¿‡æ¸¡ï¼Œä½†å› ä¸ºself.colorè¿ç®—åä¼šä¸ºè´Ÿæ•°ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼Œéœ€è¦åŠ ä¸Šåˆ¤æ–­speedè¦ä¹˜ä»¥è´Ÿä¸€ï¼Œcolorè¶…è¿‡äºŒäº”äº”è¦é‡æ–°èµ‹å€¼
ç°åœ¨è¿˜æœ‰ä¸‰ä»¶äº‹ï¼Œé‡ç½®æ–¹æ³•ï¼Œå”¤é†’å±‚ï¼Œè®¾ç½®é€Ÿåº¦ä¸º-2åœ¨ç»“æŸè¿‡æ¸¡æ—¶ï¼Œ
åœ¨ç¡è§‰æ—¶ç§»åŠ¨æ˜¯å¥‡æ€ªçš„ï¼Œéœ€è¦åŠ ä¸Šç¡è§‰æ—¶ç§»åŠ¨è¦èµ‹å€¼ä¸ºFalse

## 3.29 p16
è€•ç§çš„åœŸå£¤
å¯¼å…¥spritesæ–¹ä¾¿ç®¡ç†ï¼Œpygame.image.loadå¯¼å…¥åœŸå£¤çš„å›¾soil_surfï¼Œè¿™é‡Œæœ‰ä¸‰ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ï¼Œé¦–å…ˆåˆ¤æ–­è¯¥åœ°åŒºæ˜¯å¦é€‚åˆè€•ç§ï¼Œå…¶æ¬¡åœ°åŒºæ˜¯å¦è¶…è¿‡è¾¹ç•Œï¼Œæœ€ååˆ¤æ–­åœŸå£¤é‡Œæ˜¯å¦æœ‰å…¶ä»–æ¤ç‰©ï¼Œæ‰€ä»¥è¦æ±‚å‡ºå…¨éƒ¨çš„å¯è€•ç§é‚£ä¸ªç“·ç –åœ°æ ¼ï¼Œåœ¨map.tmxä¸­çš„Farmableæ˜¯å¯è€•ç§ä½ç½®,æ±‚å‡ºåœ°å›¾çš„é«˜å’Œå®½å…±æœ‰å¤šå°‘å—ç“·ç –ï¼Œtiledä¸­çš„åœ°å›¾å±æ€§ä¹Ÿæœ‰ï¼Œåˆ›å»ºåˆ—è¡¨ä½¿æ¯ä¸€å—ç“·ç –éƒ½åœ¨å…¶ä¸­ï¼Œæ ‡è®°å¥½å¯è€•ç§çš„ç“·ç –åœ°å—åï¼Œåˆ›å»ºæ–°æ–¹æ³•create_hit_rectså’Œæ–°çš„åˆ—è¡¨ï¼Œå¯¹å­˜å‚¨çš„åœ°å—å¾ªç¯ï¼Œå…ˆè¡Œååˆ—ï¼Œå†è¿›è¡Œæšä¸¾,è¿›è¡Œåˆ¤æ–­å¦‚æœåœ°å—å†åˆ—è¡¨ä¸­çš„ä½ç½®æ˜¯æœ‰'F'è¡¨ç¤ºçš„ï¼Œé‚£ä¹ˆè¾“å‡ºè¿™ä¸ªåœ°å—çš„åˆ—è¡¨ä½ç½®ï¼Œxçš„ä½ç½®æ˜¯åˆ—è¡¨ä½ç½®ä¹˜ä»¥ç“·ç –å¤§å°ï¼Œyçš„ä½ç½®åŒç†ï¼Œæœ€åå°†æ‰€æœ‰çš„å€¼èµ‹ç»™ç©ºçš„åˆ—è¡¨ä¸­ï¼Œç”³è¯·æ–°çš„å‡½æ•°get_hitï¼Œåˆ›å»ºå·¥å…·çš„ç¢°æ’ç‚¹è¿›è¡Œåˆ¤æ–­ï¼Œè·å–xå’Œyï¼Œx = rect.x // TILE_SIZEå’Œy = rect.y // TILE_SIZEä»¥æ­¤æ¥è·å–å¹³é“ºçš„ä½ç½®ï¼Œæ£€æŸ¥åˆ—è¡¨ä¸­æ˜¯å¦æœ‰'F',å…ˆè·å–åˆ—ï¼Œå†åˆ°è¡Œä¸­è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœå«æœ‰'F'ï¼Œåˆ™å†åˆ—è¡¨ä¸­append('X')ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šé€šè¿‡SoilLayerå‰å¾€playerå‘ç”Ÿå†levelå†…éƒ¨çš„setupä¸­çš„Playerä¸­soil_layer,å†playerä¸­åŠ ä¸Šå±æ€§soil_layer,æœ€ååœ¨interactionä¸­æŠŠå‚æ•°å˜ä¸ºå®é™…å±æ€§ï¼Œç°çŠ¶ä½¿ç”¨å·¥å…·æ—¶ï¼Œè°ƒç”¨soil_layer.get_hit(self.target_pos),ç°åœ¨å‰é¢èµ‹å€¼xçš„åœ°æ–¹åˆ›å»ºä¸€ä¸ªåœŸå£¤ç“¦ç‰‡SoilTileï¼Œè¿™æ ·å°±å®Œæˆäº†è€•åœ°çš„åˆ›å»º

## 3.29 P18 p17æœªä½œ
æµ‡æ°´çš„é€»è¾‘
ä¸è€•ç§çš„åœŸå£¤é€»è¾‘ç›¸ä¼¼ï¼Œé¦–å…ˆå†use_toolä¸­å°†soil_layerå†™å…¥æ°´å£¶çš„åˆ¤æ–­ä¸­ï¼Œç»™äºˆå‚æ•°self.target_posï¼Œå†sioilä¸­åˆ›å»ºæ–°çš„æ–¹æ³•
waterç”¨æ¥è·å–æµ‡æ°´çš„ä½ç½®ï¼Œæœ‰ä¸¤ä»¶äº‹è¦åšåœ¨è¿™é‡Œï¼Œé¦–å…ˆæ˜¯å°†åˆ—è¡¨ä¸­çš„è€•åœ°è¡¨åŠ ä¸Š'w'è¿›è¡Œæ ‡è®°ï¼Œå…¶æ¬¡æ˜¯å®šä¹‰ä¸€ä¸ªWaterTileçš„ç±»è¡¨ç¤ºè¿™å—è€•åœ°ä¸Šæœ‰æ°´ï¼Œå†ç±»ä¸­æœ‰ä¸‰ä»¶äº‹è¦åšï¼Œé¦–å…ˆæ˜¯å¤åˆ¶åœŸå£¤è€•åœ°çš„ä½ç½®æ„å‘³ç€æ°´ç“¦çš„ä½ç½®åº”è¯¥å’Œè€•åœ°çš„ä½ç½®ç›¸åŒï¼Œå…¶æ¬¡æ˜¯å¯¼å…¥å›¾åƒçš„è·¯å¾„ï¼Œæœ€å
é‡æ–°å¼€å§‹çš„ä¸€å¤©ï¼Œæ°´ä¼šæ¶ˆå¤±ï¼Œæ¶ˆå¤±çš„æ°´ç –å®šä¹‰ä¸ºremove_waterï¼Œæ£€è§†Self.gridä¸­çš„'W'å¹¶ä¸”åˆ é™¤ï¼Œæœ€åå†levelä¸­çš„resetä¸­è°ƒç”¨æ–¹æ³•
å®Œæˆæ°´ç –çš„æ¶ˆé™¤

## 4.7 p20 p21 p19
åˆ›å»ºä½œç‰©  
æ”¶è·  
é›¨

## 4.8 p22
ç™½å¤©åˆ°é»‘å¤œ